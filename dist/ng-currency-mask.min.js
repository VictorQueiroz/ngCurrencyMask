!function(){"use strict";angular.module("ngCurrencyMask",["ngCurrencyMask/Services","ngCurrencyMask/Directives","ngCurrencyMask/Filters","ngCurrencyMask/Providers"])}();
!function(){"use strict";angular.module("ngCurrencyMask.services.Masker",[]).factory("Masker",["$currencyMask",function(r){var e=function(e,n){if(!e)return e;var a=e.toString();return a=a.replace(/^/,(n?n:r.currency)+" ")},n=function(n,a){var c=n?n.toString():"",t=r.maskMatches;return t.forEach(function(r){c=r.replace instanceof Function?r.replace(c):c.replace(r.replace,r.with)}),c=e(c,a)},a=function(e){var n=e?e.toString():"",a=r.unmaskMatches;return a.forEach(function(r){n=r.replace instanceof Function?r.replace(n):n.replace(r.replace,r.with)}),n};return{maskValue:n,unmaskValue:a}}])}();
!function(){"use strict";angular.module("ngCurrencyMask.filters.currencyMask",[]).filter("currencyMask",["Masker",function(r){var n=function(r){switch(r){case"mask":return 1;case"unmask":return 2}},u=function(r){return null===r||"default"===r?null:r};return function(e,t,a){if(!e)return"";e=e.toString();var t=t?n(t):n("mask"),s=a?u(a):u(null);if(1===t){var c=r.maskValue(e,s);return c}return 2===t?r.unmaskValue(e):void 0}}])}();
!function(){"use strict";angular.module("ngCurrencyMask.providers.currencyMask",[]).provider("$currencyMask",function(){var e=[{replace:/(\.[0-9])(?=[0-9]{0}$)/g,"with":"$10"},{replace:/^(\d)*(?=(\d{0,})$)/g,"with":"$&,00"},{replace:/^(\d{1})$/,"with":"0,0$1"},{replace:/(\d{2})$/,"with":",$1"},{replace:/,(\d{3,})$/,"with":"$1,00"},{replace:/^,(\d{2})$/,"with":"0,$1"},{replace:/(?:\,{2,})+/g,"with":","},{replace:/[A-z{}\[\]_!\.]/g,"with":""},{replace:/(\d)(?=(\d{3})+(?!\d))/g,"with":"$1."}],r=[{replace:/\D/g,"with":""},{replace:/^(\d{1})$/,"with":"0.0$1"},{replace:/(\d{2})$/,"with":".$1"},{replace:/(,00|\.00$)/g,"with":""},{replace:/^(0{1,})/,"with":""},{replace:/^\.(\d{2})$/,"with":"0.$1"},{replace:function(e){if(!e)return"";var r=new RegExp(".(d{3,})$"),t=e.match(r);return t instanceof Array&&t[1]&&(e=e.replace(t,t.toString().substr(0,2))),e}}],t=this,c={currency:"R$",maskMatches:e,unmaskMatches:r};this.setCurrency=function(e){return c.currency=e,t},this.addUnmaskMatch=function(e,r){return c.unmaskMatches.unshift({replace:e,"with":r}),t},this.addMaskMatch=function(e,r){var a={};return r?(a.replace=e,a.with=r):a.replace=e,c.maskMatches.unshift(a),t},this.$get=function(){return c}})}();
!function(){"use strict";angular.module("ngCurrencyMask.directives",["ngCurrencyMask.directives.ngCurrencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask/Filters",["ngCurrencyMask/Filter/currencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask.directives.ngCurrencyMask",[]).directive("ngCurrencyMask",["Masker",function(n){return{restrict:"A",require:["?ngModel"],link:function(r,e,u,t){var c=t[0],i=u.currency?u.currency:null,a=function(r){return n.maskValue(r,i)},s=function(r){return n.unmaskValue(r)},l=function(n){return s(n)};c.$parsers.push(l),r.$watch(u.ngModel,function(n){if(n&&!(n.length<1)){var r=a(n);r!=n&&(c.$setViewValue(r),c.$render())}})}}}])}();
!function(){"use strict";angular.module("ngCurrencyMask.providers",["ngCurrencyMask.providers.currencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask.services",["ngCurrencyMask.services.Masker"])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbXBvbmVudHMvTWFza2VyLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2N1cnJlbmN5TWFzay5maWx0ZXIuanMiLCJjb21wb25lbnRzL2N1cnJlbmN5TWFzay5wcm92aWRlci5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy5qcyIsImNvbXBvbmVudHMvZmlsdGVycy5qcyIsImNvbXBvbmVudHMvbmdDdXJyZW5jeU1hc2suZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9wcm92aWRlcnMuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiZGVmYXVsdHMiLCJhZGRDdXJyZW5jeSIsInZhbHVlIiwiY3VycmVuY3kiLCJuZXdWYWx1ZSIsInRvU3RyaW5nIiwicmVwbGFjZSIsIm1hc2tWYWx1ZSIsIm1hc2tlZFZhbHVlIiwibWF0Y2hlcyIsIm1hc2tNYXRjaGVzIiwiZm9yRWFjaCIsImtleSIsIkZ1bmN0aW9uIiwid2l0aCIsInVubWFza1ZhbHVlIiwidW5tYXNrZWRWYWx1ZSIsInVubWFza01hdGNoZXMiLCJmaWx0ZXIiLCJNYXNrZXIiLCJkaWdlc3RNb2RlIiwibW9kZSIsImRpZ2VzdEN1cnJlbmN5IiwiaW5wdXQiLCJkaWdlc3RlZEN1cnJlbmN5IiwicHJvdmlkZXIiLCJyZWdleCIsIlJlZ0V4cCIsIm1hdGNoIiwiQXJyYXkiLCJzdWJzdHIiLCIkc2VsZiIsInRoaXMiLCIkY3VycmVuY3lNYXNrIiwic2V0Q3VycmVuY3kiLCJhZGRVbm1hc2tNYXRjaCIsInVuc2hpZnQiLCJhZGRNYXNrTWF0Y2giLCIkZ2V0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiY29udHJvbGxlcnMiLCJuZ01vZGVsIiwicGFyc2VyIiwiJHBhcnNlcnMiLCJwdXNoIiwiJHdhdGNoIiwibGVuZ3RoIiwiJHNldFZp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QUFRTSxjQUFjN0MsR0FDdEJ1QyxFQUFRTztDQ2xEcEIsV0FDQyxZQUVBekQsU0FDRUMsT0FBTyw0QkFDUDtDQ0xILFdBQ0MsWUFFQUQsU0FDRUMsT0FBTywyQkFBNEIiLCJmaWxlIjoibmctY3VycmVuY3ktbWFzay5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2snLCBbXG5cdFx0XHQnbmdDdXJyZW5jeU1hc2svU2VydmljZXMnLFxuXHRcdFx0J25nQ3VycmVuY3lNYXNrL0RpcmVjdGl2ZXMnLFxuXHRcdFx0J25nQ3VycmVuY3lNYXNrL0ZpbHRlcnMnLFxuXHRcdFx0J25nQ3VycmVuY3lNYXNrL1Byb3ZpZGVycydcblx0XHRdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrLnNlcnZpY2VzLk1hc2tlcicsIFtdKVxuXG5cdFx0LmZhY3RvcnkoJ01hc2tlcicsIFsnJGN1cnJlbmN5TWFzaycsIGZ1bmN0aW9uIChkZWZhdWx0cykge1xuXHRcdFx0dmFyIGFkZEN1cnJlbmN5ID0gZnVuY3Rpb24gKHZhbHVlLCBjdXJyZW5jeSkge1xuXHRcdFx0XHRpZighdmFsdWUpIHJldHVybiB2YWx1ZTtcblxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogQ29udmVydHMgQHZhbHVlIHRvIGEgU3RyaW5nIGluc3RhbmNlLCBmb3IgTnVtYmVyXG5cdFx0XHRcdCAqIGluc3RhbmNlcyBkb2Vzbid0IGhhdmUgLnJlcGxhY2UoKSBwcm90b3R5cGUuXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR2YXIgbmV3VmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXG5cdFx0XHRcdC8vIEltcGxlbWVudHMgdGhlIGN1cnJlbmN5IGF0IEBuZXdWYWx1ZVxuXHRcdFx0XHRuZXdWYWx1ZSA9IG5ld1ZhbHVlLnJlcGxhY2UoL14vLCAoY3VycmVuY3kgPyBjdXJyZW5jeSA6IGRlZmF1bHRzLmN1cnJlbmN5KSArICcgJyk7XG5cblx0XHRcdFx0cmV0dXJuIG5ld1ZhbHVlO1xuXHRcdFx0fTtcblxuXHRcdCAgLyoqXG5cdFx0ICAgKiBNYXNrIEB2YWx1ZSBtYXRjaGluZyBpdCBjb250ZW50cy5cblx0XHQgICAqL1xuXHRcdCAgdmFyIG1hc2tWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY3VycmVuY3kpIHtcblx0XHQgICAgdmFyIG1hc2tlZFZhbHVlID0gdmFsdWUgPyB2YWx1ZS50b1N0cmluZygpIDogJycsXG5cdFx0ICAgIFx0XHRtYXRjaGVzID0gZGVmYXVsdHMubWFza01hdGNoZXM7XG5cdFx0ICAgIFxuXHRcdCAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdCAgICBcdGlmKGtleS5yZXBsYWNlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcblx0XHQgICAgXHRcdG1hc2tlZFZhbHVlID0ga2V5LnJlcGxhY2UobWFza2VkVmFsdWUpO1xuXHRcdCAgICBcdH0gZWxzZSB7XG5cdFx0ICAgICAgXHRtYXNrZWRWYWx1ZSA9IG1hc2tlZFZhbHVlLnJlcGxhY2Uoa2V5LnJlcGxhY2UsIGtleS53aXRoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pO1xuXG5cdFx0ICAgIG1hc2tlZFZhbHVlID0gYWRkQ3VycmVuY3kobWFza2VkVmFsdWUsIGN1cnJlbmN5KTtcblxuXHRcdCAgICByZXR1cm4gbWFza2VkVmFsdWU7XG5cdFx0ICB9O1xuXHRcdCAgXG5cdFx0ICAvKipcblx0XHQgICAqIFJldHVybiBAdmFsdWUgdG8gaXQgcmVhbCB2YWx1ZS5cblx0XHQgICAqL1xuXHRcdCAgdmFyIHVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0ICAgIHZhciB1bm1hc2tlZFZhbHVlID0gdmFsdWUgPyB2YWx1ZS50b1N0cmluZygpIDogJycsXG5cdFx0ICAgIFx0XHRtYXRjaGVzID0gZGVmYXVsdHMudW5tYXNrTWF0Y2hlcztcblx0XHQgICAgXG5cdFx0ICAgIG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ICAgIFx0aWYoa2V5LnJlcGxhY2UgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuXHRcdCAgICBcdFx0dW5tYXNrZWRWYWx1ZSA9IGtleS5yZXBsYWNlKHVubWFza2VkVmFsdWUpO1xuXHRcdCAgICBcdH0gZWxzZSB7XG5cdFx0ICAgICAgXHR1bm1hc2tlZFZhbHVlID0gdW5tYXNrZWRWYWx1ZS5yZXBsYWNlKGtleS5yZXBsYWNlLCBrZXkud2l0aCk7XG5cdFx0ICAgIFx0fVxuXHRcdCAgICB9KTtcblx0XHQgICAgXG5cdFx0ICAgIHJldHVybiB1bm1hc2tlZFZhbHVlO1xuXHRcdCAgfTtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0bWFza1ZhbHVlOiBtYXNrVmFsdWUsXG5cdFx0XHRcdHVubWFza1ZhbHVlOiB1bm1hc2tWYWx1ZVxuXHRcdFx0fTtcblx0XHR9XSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2suZmlsdGVycy5jdXJyZW5jeU1hc2snLCBbXSlcblxuXHRcdC5maWx0ZXIoJ2N1cnJlbmN5TWFzaycsIFsnTWFza2VyJywgZnVuY3Rpb24gKE1hc2tlcikge1xuXHRcdFx0dmFyIGRpZ2VzdE1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xuXHRcdFx0XHRzd2l0Y2gobW9kZSkge1xuXHRcdFx0XHRcdGNhc2UgJ21hc2snOlxuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICd1bm1hc2snOlxuXHRcdFx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGRpZ2VzdEN1cnJlbmN5ID0gZnVuY3Rpb24gKGN1cnJlbmN5KSB7XG5cdFx0XHRcdGlmKGN1cnJlbmN5ID09PSBudWxsIHx8IGN1cnJlbmN5ID09PSAnZGVmYXVsdCcpIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gY3VycmVuY3k7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBtb2RlLCBjdXJyZW5jeSkge1xuXHRcdFx0XHRpZighaW5wdXQpIHJldHVybiAnJztcblxuXHRcdFx0XHRpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCk7XG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gJ21vZGUnIGRlZmluZWQuIE1hc2sgdGhlIGlucHV0LlxuXHRcdFx0XHR2YXIgbW9kZSA9IG1vZGUgPyBkaWdlc3RNb2RlKG1vZGUpIDogZGlnZXN0TW9kZSgnbWFzaycpLFxuXHRcdFx0XHRkaWdlc3RlZEN1cnJlbmN5ID0gY3VycmVuY3kgPyBkaWdlc3RDdXJyZW5jeShjdXJyZW5jeSkgOiBkaWdlc3RDdXJyZW5jeShudWxsKTtcblxuXHRcdFx0XHRpZihtb2RlID09PSAxKSB7XG5cdFx0XHRcdFx0dmFyIG1hc2tlZFZhbHVlID0gTWFza2VyLm1hc2tWYWx1ZShpbnB1dCwgZGlnZXN0ZWRDdXJyZW5jeSk7XG5cblx0XHRcdFx0XHRyZXR1cm4gbWFza2VkVmFsdWU7XG5cdFx0XHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gMikge1xuXHRcdFx0XHRcdHJldHVybiBNYXNrZXIudW5tYXNrVmFsdWUoaW5wdXQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9XSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2sucHJvdmlkZXJzLmN1cnJlbmN5TWFzaycsIFtdKVxuXG5cdFx0LnByb3ZpZGVyKCckY3VycmVuY3lNYXNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIG1hc2tNYXRjaGVzID0gW1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXC5bMC05XSkoPz1bMC05XXswfSQpL2csICd3aXRoJzogJyQxMCcgfSwvLyBDb252ZXJ0cyBYWFhYLlggdG8gWFhYWC5YMFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogL14oXFxkKSooPz0oXFxkezAsfSkkKS9nLCAnd2l0aCc6ICckJiwwMCcgfSwvLyBDb252ZXJ0cyBYWFhYIHRvIFhYWFgsMDBcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eKFxcZHsxfSkkLywgJ3dpdGgnOiAnMCwwJDEnIH0sLy8gQ29udmVydHMgWCB0byAwLDBYXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiAnLCQxJ30sLy8gQ29udmVydHMgWFggdG8gMCxYWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLywoXFxkezMsfSkkLywgJ3dpdGgnOiAnJDEsMDAnIH0sLy8gQ29udmVydHMgWCxYWFggdG8gWCxYWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogL14sKFxcZHsyfSkkLywgJ3dpdGgnOiBcIjAsJDFcIiB9LC8vIENvbnZlcnRzICxYWCB0byAwLFhYXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKD86XFwsezIsfSkrL2csICd3aXRoJzogXCIsXCIgfSwvLyBDb252ZXJ0cyBhbGwgZHVwbGljYXRlZCBjb21tYSBmb3IganVzdCBvbmVcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9bQS16e31cXFtcXF1fIVxcLl0vZywgJ3dpdGgnOiBcIlwiIH0sLy8gQ29udmVydHMgYWxsIG5vbi1kaWdpdCBudW1iZXJzIHRvICcnXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZCkoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCAnd2l0aCc6IFwiJDEuXCIgfSwvLyBDb252ZXJ0cyBYWFhYWFggdG8gWFhYLlhYWFx0XHRcdFx0XG5cdFx0XHRdLFxuXG5cdFx0XHR1bm1hc2tNYXRjaGVzID0gW1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL1xcRC9nLCAnd2l0aCc6IFwiXCIgfSwgLy8gQ29udmVydHMgIGFsbCBub24tZGlnaXQgbnVtYmVycyB0byAnJ1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL14oXFxkezF9KSQvLCAnd2l0aCc6ICcwLjAkMScgfSwgLy8gQ29udmVydHMgWCB0byBYLjBYXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiAnLiQxJ30sIC8vIENvbnZlcnRzIFhYIHRvIC5YWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLygsMDB8XFwuMDAkKS9nLCAnd2l0aCc6ICcnIH0sIC8vIENvbnZlcnRzIGFsbCAsWFggYW5kIC5YWCB0byBub3RoaW5nXHRcdFx0XHRcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eKDB7MSx9KS8sICd3aXRoJzogJycgfSwgLy8gQ29udmVydHMgemVyb3MgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcgdG8gbm90aGluZ1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL15cXC4oXFxkezJ9KSQvLCAnd2l0aCc6IFwiMC4kMVwiIH0sIC8vIENvbnZlcnRzIC5YWCB0byAwLlhYXG5cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIENsZWFuIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBmcm9tXG5cdFx0XHRcdCAqIHVuc2lnbmlmaWNhbnQgbnVtYmVycyBjb252ZXJ0aW5nXG5cdFx0XHRcdCAqIFhYWC4zMFhYWFggdG8gWFhYLjMwXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRpZighdmFsdWUpIHJldHVybiAnJztcblxuXHRcdFx0XHRcdFx0dmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXFwuKFxcZHszLH0pJCcpLFxuXHRcdFx0XHRcdFx0bWF0Y2ggPSB2YWx1ZS5tYXRjaChyZWdleCk7XG5cblx0XHRcdFx0XHRcdGlmKG1hdGNoIGluc3RhbmNlb2YgQXJyYXkgJiYgbWF0Y2hbMV0pIHtcblx0XHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKG1hdGNoLCBtYXRjaC50b1N0cmluZygpLnN1YnN0cigwLCAyKSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdF07XG5cblx0XHRcdHZhciAkc2VsZiA9IHRoaXMsXG5cdFx0XHQkY3VycmVuY3lNYXNrID0ge1xuXHRcdFx0XHRjdXJyZW5jeTogJ1IkJyxcblxuXHRcdFx0XHQvLyBNYXRjaGVzIHdobyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGlucHV0IGNvbnRlbnQuXG5cdFx0XHRcdG1hc2tNYXRjaGVzOiBtYXNrTWF0Y2hlcyxcblxuXHRcdFx0XHR1bm1hc2tNYXRjaGVzOiB1bm1hc2tNYXRjaGVzXG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnNldEN1cnJlbmN5ID0gZnVuY3Rpb24gKGN1cnJlbmN5KSB7XG5cdFx0XHRcdCRjdXJyZW5jeU1hc2suY3VycmVuY3kgPSBjdXJyZW5jeTtcblxuXHRcdFx0XHRyZXR1cm4gJHNlbGY7XG5cdFx0XHR9O1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIEFkZCBhIG5ldyBtYXRjaCB0YXNrIHRvICRjdXJyZW5jeU1hc2sudW5tYXNrTWF0Y2hlcy5cblx0XHRcdCAqL1xuXHRcdFx0dGhpcy5hZGRVbm1hc2tNYXRjaCA9IGZ1bmN0aW9uIChyZXBsYWNlLCB2YWx1ZSkge1xuXHRcdFx0XHQkY3VycmVuY3lNYXNrLnVubWFza01hdGNoZXMudW5zaGlmdCh7XG5cdFx0XHRcdFx0J3JlcGxhY2UnOiByZXBsYWNlLFxuXHRcdFx0XHRcdCd3aXRoJzogdmFsdWVcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cmV0dXJuICRzZWxmO1xuXHRcdFx0fTtcdFx0XHRcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBZGQgYSBuZXcgbWF0Y2ggdGFzayB0byAkY3VycmVuY3lNYXNrLm1hc2tNYXRjaGVzLlxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLmFkZE1hc2tNYXRjaCA9IGZ1bmN0aW9uIChyZXBsYWNlLCB2YWx1ZSkge1xuXHRcdFx0XHR2YXIgbWF0Y2ggPSB7fTtcblxuXHRcdFx0XHRpZighdmFsdWUpIHtcblx0XHRcdFx0XHRtYXRjaC5yZXBsYWNlID0gcmVwbGFjZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtYXRjaC5yZXBsYWNlID0gcmVwbGFjZTtcblx0XHRcdFx0XHRtYXRjaC53aXRoID0gdmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkY3VycmVuY3lNYXNrLm1hc2tNYXRjaGVzLnVuc2hpZnQobWF0Y2gpO1xuXG5cdFx0XHRcdHJldHVybiAkc2VsZjtcblx0XHRcdH07XG5cblx0XHRcdHRoaXMuJGdldCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuICRjdXJyZW5jeU1hc2s7XG5cdFx0XHR9O1xuXHRcdH0pO1x0XHRcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzJywgWyduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzLm5nQ3VycmVuY3lNYXNrJ10pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrL0ZpbHRlcnMnLCBbJ25nQ3VycmVuY3lNYXNrL0ZpbHRlci9jdXJyZW5jeU1hc2snXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2suZGlyZWN0aXZlcy5uZ0N1cnJlbmN5TWFzaycsIFtdKVxuXG5cdFx0LmRpcmVjdGl2ZSgnbmdDdXJyZW5jeU1hc2snLCBbJ01hc2tlcicsIGZ1bmN0aW9uIChNYXNrZXIpIHtcblx0XHQgIHJldHVybiB7XG5cdFx0ICAgIHJlc3RyaWN0OiAnQScsXG5cdFx0ICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcblx0XHQgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcblx0XHQgICAgXHR2YXIgbmdNb2RlbCA9IGNvbnRyb2xsZXJzWzBdLFxuXHRcdCAgICAgIFx0XHRjdXJyZW5jeSA9ICFhdHRycy5jdXJyZW5jeSA/IG51bGwgOiBhdHRycy5jdXJyZW5jeTtcblxuXHRcdCAgICBcdC8qKlxuXHRcdCAgICBcdCAqIE1hc2sgQHZhbHVlIG1hdGNoaW5nIGl0IGNvbnRlbnRzLlxuXHRcdCAgICBcdCAqL1xuXHRcdCAgICAgIHZhciBtYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHQgICAgICAgIHJldHVybiBNYXNrZXIubWFza1ZhbHVlKHZhbHVlLCBjdXJyZW5jeSk7XG5cdFx0ICAgICAgfTtcblx0XHQgICAgICBcblx0XHQgICAgICAvKipcblx0XHQgICAgICAgKiBSZXR1cm4gQHZhbHVlIHRvIGl0IHJlYWwgdmFsdWUuXG5cdFx0ICAgICAgICovXG5cdFx0ICAgICAgdmFyIHVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0ICAgICAgICByZXR1cm4gTWFza2VyLnVubWFza1ZhbHVlKHZhbHVlKTtcblx0XHQgICAgICB9O1xuXHRcdCAgICAgIFxuXHRcdCAgICAgIC8qKlxuXHRcdCAgICAgICAqIFBhcnNlciB3aG8gd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBuZ01vZGVsXG5cdFx0ICAgICAgICogYmVmb3JlIHRoZSBnb2VzIHRvIERPTS4gVGhhdCBpcyB0aGUgcmVhbCBuZ01vZGVsIHZhbHVlLlxuXHRcdCAgICAgICAqL1xuXHRcdCAgICAgIHZhciBwYXJzZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHQgICAgICAgIHJldHVybiB1bm1hc2tWYWx1ZSh2YWx1ZSk7XG5cdFx0ICAgICAgfTtcblxuXHRcdCAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZXIpO1xuXHRcdCAgICAgIFxuXHRcdCAgICAgIC8qKlxuXHRcdCAgICAgICAqIEV2ZXJ5dGltZSB0aGUgaW5wdXQgc3VmZmVyIGEgY2hhbmdlLFxuXHRcdCAgICAgICAqIHRoZSBkaXJlY3RpdmUgd2lsbCB1cGRhdGUgaXQgYW5kIG1hc2tcblx0XHQgICAgICAgKiBhbGwgdGhlIHR5cGVkIGNvbnRlbnQuXG5cdFx0ICAgICAgICovXG5cdFx0ICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm5nTW9kZWwsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdCAgICAgIFx0aWYoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA8IDEpIHsgcmV0dXJuOyB9XG5cblx0XHQgICAgICAgIHZhciBtYXNrZWRWYWx1ZSA9IG1hc2tWYWx1ZSh2YWx1ZSk7XG5cdFx0ICAgICAgICBcblx0XHQgICAgICAgIGlmKG1hc2tlZFZhbHVlICE9IHZhbHVlKSB7XG5cdFx0ICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShtYXNrZWRWYWx1ZSk7XG5cdFx0ICAgICAgICAgIG5nTW9kZWwuJHJlbmRlcigpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9XG5cdFx0ICB9O1xuXHRcdH1dKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5wcm92aWRlcnMnLCBbXG5cdFx0XHQnbmdDdXJyZW5jeU1hc2sucHJvdmlkZXJzLmN1cnJlbmN5TWFzaydcblx0XHRdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5zZXJ2aWNlcycsIFsnbmdDdXJyZW5jeU1hc2suc2VydmljZXMuTWFza2VyJ10pO1xufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=