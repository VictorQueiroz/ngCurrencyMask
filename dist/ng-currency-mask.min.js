"use strict";angular.module("ngCurrencyMask",["ngCurrencyMask.directives","ngCurrencyMask.filters","ngCurrencyMask.providers"]);
"use strict";angular.module("ngCurrencyMask.filters.currencyMask",[]).filter("currencyMask",["$masker",function(r){var n=function(r){switch(r){case"mask":return 1;case"unmask":return 2}},u=function(r){return null===r||"default"===r?null:r};return function(e,a,t){if(!e)return"";e=e.toString();var a=a?n(a):n("mask"),s=t?u(t):u(null);if(1===a){var c=r.maskValue(e,s);return c}return 2===a?r.unmaskValue(e):void 0}}]);
"use strict";angular.module("ngCurrencyMask.directives",["ngCurrencyMask.directives.ngCurrencyMask"]);
"use strict";angular.module("ngCurrencyMask.filters",["ngCurrencyMask.filters.currencyMask"]);
"use strict";angular.module("ngCurrencyMask.providers.masker",[]).provider("$masker",function(){var e=this;this.defaults={currency:"R$",maskMatches:[{replace:/(\.[0-9])(?=[0-9]{0}$)/g,"with":"$10"},{replace:/^(\d)*(?=(\d{0,})$)/g,"with":"$&,00"},{replace:/^(\d{1})$/,"with":"0,0$1"},{replace:/(\d{2})$/,"with":",$1"},{replace:/,(\d{3,})$/,"with":"$1,00"},{replace:/^,(\d{2})$/,"with":"0,$1"},{replace:/(?:\,{2,})+/g,"with":","},{replace:/[A-z{}\[\]_!\.]/g,"with":""},{replace:/(\d)(?=(\d{3})+(?!\d))/g,"with":"$1."}],unmaskMatches:[{replace:/\D/g,"with":""},{replace:/^(\d{1})$/,"with":"0.0$1"},{replace:/(\d{2})$/,"with":".$1"},{replace:/(,00|\.00$)/g,"with":""},{replace:/^(0{1,})/,"with":""},{replace:/^\.(\d{2})$/,"with":"0.$1"},{replace:function(e){if(!e)return"";var r=new RegExp(".(d{3,})$"),t=e.match(r);return t instanceof Array&&t[1]&&(e=e.replace(t,t.toString().substr(0,2))),e}}]},this.setCurrency=function(r){return e.currency=r,e},this.addUnmaskMatch=function(r,t){return e.unmaskMatches.unshift({replace:r,"with":t}),e},this.addMaskMatch=function(r,t){var a={};return t?(a.replace=r,a.with=t):a.replace=r,e.maskMatches.unshift(a),e},this.$get=function(){function r(){function r(r,t){if(!r)return r;var a=r.toString();return a=a.replace(/^/,(t?t:e.defaults.currency)+" ")}var t={};return t.maskValue=function(t,a){var c=t?t.toString():"",n=e.defaults.maskMatches;return n.forEach(function(e){c=e.replace instanceof Function?e.replace(c):c.replace(e.replace,e.with)}),c=r(c,a)},t.unmaskValue=function(r){var t=r?r.toString():"",a=e.defaults.unmaskMatches;return a.forEach(function(e){t=e.replace instanceof Function?e.replace(t):t.replace(e.replace,e.with)}),t},t}return new r}});
"use strict";angular.module("ngCurrencyMask.directives.ngCurrencyMask",[]).directive("ngCurrencyMask",["$masker",function(r){return{restrict:"A",require:["?ngModel"],link:function(n,e,u,t){var c=t[0],i=u.currency?u.currency:null,a=function(n){return r.maskValue(n,i)},s=function(n){return r.unmaskValue(n)},l=function(r){return s(r)};c.$parsers.push(l),n.$watch(u.ngModel,function(r){if(r&&!(r.length<1)){var n=a(r);n!=r&&(c.$setViewValue(n),c.$render())}})}}}]);
"use strict";angular.module("ngCurrencyMask.providers",["ngCurrencyMask.providers.masker"]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbXBvbmVudHMvY3VycmVuY3lNYXNrLmZpbHRlci5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy5qcyIsImNvbXBvbmVudHMvZmlsdGVycy5qcyIsImNvbXBvbmVudHMvbWFza2VyLnByb3ZpZGVyLmpzIiwiY29tcG9uZW50cy9uZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL3Byb3ZpZGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUVBLFNBQ0MsT0FBQSxrQkFDQyw0QkFDQSx5QkFDQTtBQ05GLFlBRUEsU0FDQyxPQUFBLDBDQUVBLE9BQUEsZ0JBQXdCLFVBQUEsU0FBQSxHQUN2QixHQUFBLEdBQUEsU0FBQSxHQUNDLE9BQUEsR0FDQyxJQUFBLE9BQ0MsTUFBQSxFQUVELEtBQUEsU0FDQyxNQUFBLEtBS0gsRUFBQSxTQUFBLEdBQ0MsTUFBQSxRQUFBLEdBQUEsWUFBQSxFQUNDLEtBRUEsRUFJRixPQUFBLFVBQUEsRUFBQSxFQUFBLEdBQ0MsSUFBQSxFQUFBLE1BQUEsRUFFQSxHQUFBLEVBQUEsVUFHQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUVBLElBQUEsSUFBQSxFQUFBLENBQ0MsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEVBRUEsT0FBQSxHQUNELE1BQUEsS0FBQSxFQUNDLEVBQUEsWUFBQSxHQUREO0FDdENILFlBRUEsU0FDQyxPQUFBLDZCQUFBO0FDSEQsWUFFQSxTQUNDLE9BQUEsMEJBQUE7QUNIRCxZQUVBLFNBQ0MsT0FBQSxzQ0FFQSxTQUFBLFVBQWtCLFdBQ2pCLEdBQUEsR0FBQSxJQUVBLE1BQUEsVUFDQyxTQUFBLEtBRUEsY0FDQyxRQUFBLDBCQUFBLE9BQUEsUUFDQSxRQUFBLHVCQUFBLE9BQUEsVUFDQSxRQUFBLFlBQUEsT0FBQSxVQUNBLFFBQUEsV0FBQSxPQUFBLFFBQ0EsUUFBQSxhQUFBLE9BQUEsVUFDQSxRQUFBLGFBQUEsT0FBQSxTQUNBLFFBQUEsZUFBQSxPQUFBLE1BQ0EsUUFBQSxtQkFBQSxPQUFBLEtBQ0EsUUFBQSwwQkFBQSxPQUFBLFFBR0QsZ0JBQ0MsUUFBQSxNQUFBLE9BQUEsS0FDQSxRQUFBLFlBQUEsT0FBQSxVQUNBLFFBQUEsV0FBQSxPQUFBLFFBQ0EsUUFBQSxlQUFBLE9BQUEsS0FDQSxRQUFBLFdBQUEsT0FBQSxLQUNBLFFBQUEsY0FBQSxPQUFBLFNBT0EsUUFBQSxTQUFBLEdBQ0UsSUFBQSxFQUFBLE1BQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxRQUFBLGFBQ0EsRUFBQSxFQUFBLE1BQUEsRUFNQSxPQUpBLGFBQUEsUUFBQSxFQUFBLEtBQ0MsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLFdBQUEsT0FBQSxFQUFBLEtBR0QsTUFNSixLQUFBLFlBQUEsU0FBQSxHQUdDLE1BRkEsR0FBQSxTQUFBLEVBRUEsR0FNRCxLQUFBLGVBQUEsU0FBQSxFQUFBLEdBTUMsTUFMQSxHQUFBLGNBQUEsU0FDQyxRQUFBLEVBQ0EsT0FBQSxJQUdELEdBTUQsS0FBQSxhQUFBLFNBQUEsRUFBQSxHQUNDLEdBQUEsS0FXQSxPQVRBLElBR0MsRUFBQSxRQUFBLEVBQ0EsRUFBQSxLQUFBLEdBSEEsRUFBQSxRQUFBLEVBTUQsRUFBQSxZQUFBLFFBQUEsR0FFQSxHQUdELEtBQUEsS0FBQSxXQUNDLFFBQUEsS0FHQyxRQUFBLEdBQUEsRUFBQSxHQUNDLElBQUEsRUFBQSxNQUFBLEVBTUEsSUFBQSxHQUFBLEVBQUEsVUFLQSxPQUZBLEdBQUEsRUFBQSxRQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxVQUFBLEtBWkQsR0FBQSxLQXVEQSxPQW5DQSxHQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0MsR0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEdBQ0UsRUFBQSxFQUFBLFNBQUEsV0FZRixPQVZBLEdBQUEsUUFBQSxTQUFBLEdBRUUsRUFERCxFQUFBLGtCQUFBLFVBQ0MsRUFBQSxRQUFBLEdBRUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLFFBSUYsRUFBQSxFQUFBLEVBQUEsSUFRRCxFQUFBLFlBQUEsU0FBQSxHQUNDLEdBQUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxHQUNFLEVBQUEsRUFBQSxTQUFBLGFBVUYsT0FSQSxHQUFBLFFBQUEsU0FBQSxHQUVFLEVBREQsRUFBQSxrQkFBQSxVQUNDLEVBQUEsUUFBQSxHQUVBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxRQUlGLEdBR0QsRUFHRCxNQUFBLElBQUE7QUNwSkgsWUFFQSxTQUNDLE9BQUEsK0NBRUEsVUFBQSxrQkFBNkIsVUFBQSxTQUFBLEdBQzVCLE9BQ0MsU0FBQSxJQUNBLFNBQUEsWUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQyxHQUFBLEdBQUEsRUFBQSxHQUNFLEVBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUtGLEVBQUEsU0FBQSxHQUNDLE1BQUEsR0FBQSxVQUFBLEVBQUEsSUFNRCxFQUFBLFNBQUEsR0FDQyxNQUFBLEdBQUEsWUFBQSxJQU9ELEVBQUEsU0FBQSxHQUNDLE1BQUEsR0FBQSxHQUdELEdBQUEsU0FBQSxLQUFBLEdBT0EsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0MsR0FBQSxLQUFBLEVBQUEsT0FBQSxHQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLElBQ0MsRUFBQSxjQUFBLEdBQ0EsRUFBQTtBQ2pETixZQUVBLFNBQ0MsT0FBQSw0QkFDQyIsImZpbGUiOiJuZy1jdXJyZW5jeS1tYXNrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzaycsIFtcblx0XHQnbmdDdXJyZW5jeU1hc2suZGlyZWN0aXZlcycsXG5cdFx0J25nQ3VycmVuY3lNYXNrLmZpbHRlcnMnLFxuXHRcdCduZ0N1cnJlbmN5TWFzay5wcm92aWRlcnMnXG5cdF0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5maWx0ZXJzLmN1cnJlbmN5TWFzaycsIFtdKVxuXG5cdC5maWx0ZXIoJ2N1cnJlbmN5TWFzaycsIGZ1bmN0aW9uICgkbWFza2VyKSB7XG5cdFx0dmFyIGRpZ2VzdE1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xuXHRcdFx0c3dpdGNoKG1vZGUpIHtcblx0XHRcdFx0Y2FzZSAnbWFzayc6XG5cdFx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3VubWFzayc6XG5cdFx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciBkaWdlc3RDdXJyZW5jeSA9IGZ1bmN0aW9uIChjdXJyZW5jeSkge1xuXHRcdFx0aWYoY3VycmVuY3kgPT09IG51bGwgfHwgY3VycmVuY3kgPT09ICdkZWZhdWx0Jykge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjdXJyZW5jeTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIG1vZGUsIGN1cnJlbmN5KSB7XG5cdFx0XHRpZighaW5wdXQpIHJldHVybiAnJztcblxuXHRcdFx0aW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xuXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBubyAnbW9kZScgZGVmaW5lZC4gTWFzayB0aGUgaW5wdXQuXG5cdFx0XHR2YXIgbW9kZSA9IG1vZGUgPyBkaWdlc3RNb2RlKG1vZGUpIDogZGlnZXN0TW9kZSgnbWFzaycpLFxuXHRcdFx0ZGlnZXN0ZWRDdXJyZW5jeSA9IGN1cnJlbmN5ID8gZGlnZXN0Q3VycmVuY3koY3VycmVuY3kpIDogZGlnZXN0Q3VycmVuY3kobnVsbCk7XG5cblx0XHRcdGlmKG1vZGUgPT09IDEpIHtcblx0XHRcdFx0dmFyIG1hc2tlZFZhbHVlID0gJG1hc2tlci5tYXNrVmFsdWUoaW5wdXQsIGRpZ2VzdGVkQ3VycmVuY3kpO1xuXG5cdFx0XHRcdHJldHVybiBtYXNrZWRWYWx1ZTtcblx0XHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gMikge1xuXHRcdFx0XHRyZXR1cm4gJG1hc2tlci51bm1hc2tWYWx1ZShpbnB1dCk7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzJywgWyduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzLm5nQ3VycmVuY3lNYXNrJ10pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5maWx0ZXJzJywgWyduZ0N1cnJlbmN5TWFzay5maWx0ZXJzLmN1cnJlbmN5TWFzayddKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2sucHJvdmlkZXJzLm1hc2tlcicsIFtdKVxuXG5cdC5wcm92aWRlcignJG1hc2tlcicsIGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgJG1hc2tlclByb3ZpZGVyID0gdGhpcztcblxuXHRcdHRoaXMuZGVmYXVsdHMgPSB7XG5cdFx0XHRjdXJyZW5jeTogJ1IkJyxcblxuXHRcdFx0bWFza01hdGNoZXM6IFtcblx0XHRcdFx0eyAncmVwbGFjZSc6IC8oXFwuWzAtOV0pKD89WzAtOV17MH0kKS9nLCAnd2l0aCc6ICckMTAnIH0sLy8gQ29udmVydHMgWFhYWC5YIHRvIFhYWFguWDBcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eKFxcZCkqKD89KFxcZHswLH0pJCkvZywgJ3dpdGgnOiAnJCYsMDAnIH0sLy8gQ29udmVydHMgWFhYWCB0byBYWFhYLDAwXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXihcXGR7MX0pJC8sICd3aXRoJzogJzAsMCQxJyB9LC8vIENvbnZlcnRzIFggdG8gMCwwWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXGR7Mn0pJC8sICd3aXRoJzogJywkMSd9LC8vIENvbnZlcnRzIFhYIHRvIDAsWFhcblx0XHRcdFx0eyAncmVwbGFjZSc6IC8sKFxcZHszLH0pJC8sICd3aXRoJzogJyQxLDAwJyB9LC8vIENvbnZlcnRzIFgsWFhYIHRvIFgsWFhcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eLChcXGR7Mn0pJC8sICd3aXRoJzogXCIwLCQxXCIgfSwvLyBDb252ZXJ0cyAsWFggdG8gMCxYWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyg/OlxcLHsyLH0pKy9nLCAnd2l0aCc6IFwiLFwiIH0sLy8gQ29udmVydHMgYWxsIGR1cGxpY2F0ZWQgY29tbWEgZm9yIGp1c3Qgb25lXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvW0Etent9XFxbXFxdXyFcXC5dL2csICd3aXRoJzogXCJcIiB9LC8vIENvbnZlcnRzIGFsbCBub24tZGlnaXQgbnVtYmVycyB0byAnJ1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJ3dpdGgnOiBcIiQxLlwiIH0sLy8gQ29udmVydHMgWFhYWFhYIHRvIFhYWC5YWFhcdFx0XHRcdFxuXHRcdFx0XSxcblxuXHRcdFx0dW5tYXNrTWF0Y2hlczogW1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL1xcRC9nLCAnd2l0aCc6IFwiXCIgfSwgLy8gQ29udmVydHMgIGFsbCBub24tZGlnaXQgbnVtYmVycyB0byAnJ1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL14oXFxkezF9KSQvLCAnd2l0aCc6ICcwLjAkMScgfSwgLy8gQ29udmVydHMgWCB0byBYLjBYXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiAnLiQxJ30sIC8vIENvbnZlcnRzIFhYIHRvIC5YWFxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLygsMDB8XFwuMDAkKS9nLCAnd2l0aCc6ICcnIH0sIC8vIENvbnZlcnRzIGFsbCAsWFggYW5kIC5YWCB0byBub3RoaW5nXHRcdFx0XHRcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eKDB7MSx9KS8sICd3aXRoJzogJycgfSwgLy8gQ29udmVydHMgemVyb3MgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcgdG8gbm90aGluZ1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogL15cXC4oXFxkezJ9KSQvLCAnd2l0aCc6IFwiMC4kMVwiIH0sIC8vIENvbnZlcnRzIC5YWCB0byAwLlhYXG5cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIENsZWFuIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBmcm9tXG5cdFx0XHRcdCAqIHVuc2lnbmlmaWNhbnQgbnVtYmVycyBjb252ZXJ0aW5nXG5cdFx0XHRcdCAqIFhYWC4zMFhYWFggdG8gWFhYLjMwXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR7ICdyZXBsYWNlJzogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRpZighdmFsdWUpIHJldHVybiAnJztcblxuXHRcdFx0XHRcdFx0dmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXFwuKFxcZHszLH0pJCcpLFxuXHRcdFx0XHRcdFx0bWF0Y2ggPSB2YWx1ZS5tYXRjaChyZWdleCk7XG5cblx0XHRcdFx0XHRcdGlmKG1hdGNoIGluc3RhbmNlb2YgQXJyYXkgJiYgbWF0Y2hbMV0pIHtcblx0XHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKG1hdGNoLCBtYXRjaC50b1N0cmluZygpLnN1YnN0cigwLCAyKSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9O1xuXG5cdFx0dGhpcy5zZXRDdXJyZW5jeSA9IGZ1bmN0aW9uIChjdXJyZW5jeSkge1xuXHRcdFx0JG1hc2tlclByb3ZpZGVyLmN1cnJlbmN5ID0gY3VycmVuY3k7XG5cblx0XHRcdHJldHVybiAkbWFza2VyUHJvdmlkZXI7XG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEFkZCBhIG5ldyBtYXRjaCB0YXNrIHRvICRtYXNrZXIudW5tYXNrTWF0Y2hlcy5cblx0XHQgKi9cblx0XHR0aGlzLmFkZFVubWFza01hdGNoID0gZnVuY3Rpb24gKHJlcGxhY2UsIHZhbHVlKSB7XG5cdFx0XHQkbWFza2VyUHJvdmlkZXIudW5tYXNrTWF0Y2hlcy51bnNoaWZ0KHtcblx0XHRcdFx0J3JlcGxhY2UnOiByZXBsYWNlLFxuXHRcdFx0XHQnd2l0aCc6IHZhbHVlXG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuICRtYXNrZXJQcm92aWRlcjtcblx0XHR9O1x0XHRcdFxuXG5cdFx0LyoqXG5cdFx0ICogQWRkIGEgbmV3IG1hdGNoIHRhc2sgdG8gJG1hc2tlci5tYXNrTWF0Y2hlcy5cblx0XHQgKi9cblx0XHR0aGlzLmFkZE1hc2tNYXRjaCA9IGZ1bmN0aW9uIChyZXBsYWNlLCB2YWx1ZSkge1xuXHRcdFx0dmFyIG1hdGNoID0ge307XG5cblx0XHRcdGlmKCF2YWx1ZSkge1xuXHRcdFx0XHRtYXRjaC5yZXBsYWNlID0gcmVwbGFjZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoLnJlcGxhY2UgPSByZXBsYWNlO1xuXHRcdFx0XHRtYXRjaC53aXRoID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdCRtYXNrZXJQcm92aWRlci5tYXNrTWF0Y2hlcy51bnNoaWZ0KG1hdGNoKTtcblxuXHRcdFx0cmV0dXJuICRtYXNrZXJQcm92aWRlcjtcblx0XHR9O1xuXG5cdFx0dGhpcy4kZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0ZnVuY3Rpb24gJE1hc2tlckZhY3RvcnkgKCkge1xuXHRcdFx0XHR2YXIgJG1hc2tlciA9IHt9O1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGFkZEN1cnJlbmN5ICh2YWx1ZSwgY3VycmVuY3kpIHtcblx0XHRcdFx0XHRpZighdmFsdWUpIHJldHVybiB2YWx1ZTtcblxuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIENvbnZlcnRzIEB2YWx1ZSB0byBhIFN0cmluZyBpbnN0YW5jZSwgZm9yIE51bWJlclxuXHRcdFx0XHRcdCAqIGluc3RhbmNlcyBkb2Vzbid0IGhhdmUgLnJlcGxhY2UoKSBwcm90b3R5cGUuXG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0dmFyIG5ld1ZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblxuXHRcdFx0XHRcdC8vIEltcGxlbWVudHMgdGhlIGN1cnJlbmN5IGF0IEBuZXdWYWx1ZVxuXHRcdFx0XHRcdG5ld1ZhbHVlID0gbmV3VmFsdWUucmVwbGFjZSgvXi8sIChjdXJyZW5jeSA/IGN1cnJlbmN5IDogJG1hc2tlclByb3ZpZGVyLmRlZmF1bHRzLmN1cnJlbmN5KSArICcgJyk7XG5cblx0XHRcdFx0XHRyZXR1cm4gbmV3VmFsdWU7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIE1hc2sgQHZhbHVlIG1hdGNoaW5nIGl0IGNvbnRlbnRzLlxuXHRcdFx0XHQgKi9cblx0XHRcdFx0JG1hc2tlci5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGN1cnJlbmN5KSB7XG5cdFx0XHRcdFx0dmFyIG1hc2tlZFZhbHVlID0gdmFsdWUgPyB2YWx1ZS50b1N0cmluZygpIDogJycsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZXMgPSAkbWFza2VyUHJvdmlkZXIuZGVmYXVsdHMubWFza01hdGNoZXM7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0bWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0XHRcdGlmKGtleS5yZXBsYWNlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0bWFza2VkVmFsdWUgPSBrZXkucmVwbGFjZShtYXNrZWRWYWx1ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRtYXNrZWRWYWx1ZSA9IG1hc2tlZFZhbHVlLnJlcGxhY2Uoa2V5LnJlcGxhY2UsIGtleS53aXRoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdG1hc2tlZFZhbHVlID0gYWRkQ3VycmVuY3kobWFza2VkVmFsdWUsIGN1cnJlbmN5KTtcblxuXHRcdFx0XHRcdHJldHVybiBtYXNrZWRWYWx1ZTtcblx0XHRcdFx0fTtcblx0XHRcdFx0XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiBSZXR1cm4gQHZhbHVlIHRvIGl0IHJlYWwgdmFsdWUuXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHQkbWFza2VyLnVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0dmFyIHVubWFza2VkVmFsdWUgPSB2YWx1ZSA/IHZhbHVlLnRvU3RyaW5nKCkgOiAnJyxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9ICRtYXNrZXJQcm92aWRlci5kZWZhdWx0cy51bm1hc2tNYXRjaGVzO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRcdFx0XHRpZihrZXkucmVwbGFjZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdHVubWFza2VkVmFsdWUgPSBrZXkucmVwbGFjZSh1bm1hc2tlZFZhbHVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHVubWFza2VkVmFsdWUgPSB1bm1hc2tlZFZhbHVlLnJlcGxhY2Uoa2V5LnJlcGxhY2UsIGtleS53aXRoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm4gdW5tYXNrZWRWYWx1ZTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4gJG1hc2tlcjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG5ldyAkTWFza2VyRmFjdG9yeTtcblx0XHR9O1xuXHR9KTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2suZGlyZWN0aXZlcy5uZ0N1cnJlbmN5TWFzaycsIFtdKVxuXG5cdC5kaXJlY3RpdmUoJ25nQ3VycmVuY3lNYXNrJywgZnVuY3Rpb24gKCRtYXNrZXIpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKSB7XG5cdFx0XHRcdHZhciBuZ01vZGVsID0gY29udHJvbGxlcnNbMF0sXG5cdFx0XHRcdFx0XHRjdXJyZW5jeSA9ICFhdHRycy5jdXJyZW5jeSA/IG51bGwgOiBhdHRycy5jdXJyZW5jeTtcblxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogTWFzayBAdmFsdWUgbWF0Y2hpbmcgaXQgY29udGVudHMuXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR2YXIgbWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuICRtYXNrZXIubWFza1ZhbHVlKHZhbHVlLCBjdXJyZW5jeSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdFxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogUmV0dXJuIEB2YWx1ZSB0byBpdCByZWFsIHZhbHVlLlxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dmFyIHVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuICRtYXNrZXIudW5tYXNrVmFsdWUodmFsdWUpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIFBhcnNlciB3aG8gd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBuZ01vZGVsXG5cdFx0XHRcdCAqIGJlZm9yZSB0aGUgZ29lcyB0byBET00uIFRoYXQgaXMgdGhlIHJlYWwgbmdNb2RlbCB2YWx1ZS5cblx0XHRcdFx0ICovXG5cdFx0XHRcdHZhciBwYXJzZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gdW5tYXNrVmFsdWUodmFsdWUpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZXIpO1xuXHRcdFx0XHRcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIEV2ZXJ5dGltZSB0aGUgaW5wdXQgc3VmZmVyIGEgY2hhbmdlLFxuXHRcdFx0XHQgKiB0aGUgZGlyZWN0aXZlIHdpbGwgdXBkYXRlIGl0IGFuZCBtYXNrXG5cdFx0XHRcdCAqIGFsbCB0aGUgdHlwZWQgY29udGVudC5cblx0XHRcdFx0ICovXG5cdFx0XHRcdHNjb3BlLiR3YXRjaChhdHRycy5uZ01vZGVsLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0XHRpZighdmFsdWUgfHwgdmFsdWUubGVuZ3RoIDwgMSkgeyByZXR1cm47IH1cblxuXHRcdFx0XHRcdHZhciBtYXNrZWRWYWx1ZSA9IG1hc2tWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYobWFza2VkVmFsdWUgIT0gdmFsdWUpIHtcblx0XHRcdFx0XHRcdG5nTW9kZWwuJHNldFZpZXdWYWx1ZShtYXNrZWRWYWx1ZSk7XG5cdFx0XHRcdFx0XHRuZ01vZGVsLiRyZW5kZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5wcm92aWRlcnMnLCBbXG5cdFx0J25nQ3VycmVuY3lNYXNrLnByb3ZpZGVycy5tYXNrZXInXG5cdF0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==