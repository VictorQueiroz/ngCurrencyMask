"use strict";angular.module("ngCurrencyMask",["ngCurrencyMask.directives","ngCurrencyMask.filters","ngCurrencyMask.providers"]);
"use strict";angular.module("ngCurrencyMask.filters.currencyMask",[]).filter("currencyMask",["$masker",function(r){var n=function(r){switch(r){case"mask":return 1;case"unmask":return 2}},u=function(r){return null===r||"default"===r?null:r};return function(e,a,t){if(!e)return"";e=e.toString();var a=a?n(a):n("mask"),s=t?u(t):u(null);if(1===a){var c=r.maskValue(e,s);return c}return 2===a?r.unmaskValue(e):void 0}}]);
"use strict";angular.module("ngCurrencyMask.directives",["ngCurrencyMask.directives.ngCurrencyMask"]);
"use strict";angular.module("ngCurrencyMask.filters",["ngCurrencyMask.filters.currencyMask"]);
"use strict";angular.module("ngCurrencyMask.providers.masker",[]).provider("$masker",function(){var e=this;this.defaults={currency:"R$",maskMatches:[{replace:/(\.[0-9])(?=[0-9]{0}$)/g,"with":"$10"},{replace:/^(\d)*(?=(\d{0,})$)/g,"with":"$&,00"},{replace:/^(\d{1})$/,"with":"0,0$1"},{replace:/(\d{2})$/,"with":",$1"},{replace:/,(\d{3,})$/,"with":"$1,00"},{replace:/^,(\d{2})$/,"with":"0,$1"},{replace:/(?:\,{2,})+/g,"with":","},{replace:/[A-z{}\[\]_!\.]/g,"with":""},{replace:/(\d)(?=(\d{3})+(?!\d))/g,"with":"$1."}],unmaskMatches:[{replace:/\D/g,"with":""},{replace:/^(\d{1})$/,"with":"0.0$1"},{replace:/(\d{2})$/,"with":".$1"},{replace:/(,00|\.00$)/g,"with":""},{replace:/^(0{1,})/,"with":""},{replace:/^\.(\d{2})$/,"with":"0.$1"},{replace:function(e){if(!e)return"";var r=new RegExp(".(d{3,})$"),t=e.match(r);return t instanceof Array&&t[1]&&(e=e.replace(t,t.toString().substr(0,2))),e}}]},this.setCurrency=function(r){return e.currency=r,e},this.addUnmaskMatch=function(r,t){return e.unmaskMatches.unshift({replace:r,"with":t}),e},this.addMaskMatch=function(r,t){var a={};return t?(a.replace=r,a.with=t):a.replace=r,e.maskMatches.unshift(a),e},this.$get=function(){function r(){function r(r,t){if(!r)return r;var a=r.toString();return a=a.replace(/^/,(t?t:e.defaults.currency)+" ")}var t={};return t.maskValue=function(t,a){var c=t?t.toString():"",n=e.defaults.maskMatches;return n.forEach(function(e){c=e.replace instanceof Function?e.replace(c):c.replace(e.replace,e.with)}),c=r(c,a)},t.unmaskValue=function(r){var t=r?r.toString():"",a=e.defaults.unmaskMatches;return a.forEach(function(e){t=e.replace instanceof Function?e.replace(t):t.replace(e.replace,e.with)}),t},t}return new r}});
"use strict";angular.module("ngCurrencyMask.directives.ngCurrencyMask",[]).directive("ngCurrencyMask",["$masker",function(e){return{restrict:"A",require:["?ngModel"],link:function(n,r,t,u){var a=u[0],i=t.currency?t.currency:null,c=function(n){return e.maskValue(n,i)},s=function(n){return e.unmaskValue(n)},l=function(e){return s(e)};a.$parsers.push(l),n.$watch(t.ngModel,function(e){if(e&&!(e.length<1)){var n=c(e);n!=e&&(a.$setViewValue(n),a.$render())}}),r.on("keypress",function(e){(e.which<48||e.which>57)&&e.preventDefault()}),r.on("paste",function(e){var n=e.originalEvent.clipboardData.getData("text");isNaN(n)&&e.preventDefault()})}}}]);
"use strict";angular.module("ngCurrencyMask.providers",["ngCurrencyMask.providers.masker"]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbXBvbmVudHMvY3VycmVuY3lNYXNrLmZpbHRlci5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy5qcyIsImNvbXBvbmVudHMvZmlsdGVycy5qcyIsImNvbXBvbmVudHMvbWFza2VyLnByb3ZpZGVyLmpzIiwiY29tcG9uZW50cy9uZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL3Byb3ZpZGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUVBLFNBQ0MsT0FBQSxrQkFDQyw0QkFDQSx5QkFDQTtBQ05GLFlBRUEsU0FDQyxPQUFBLDBDQUVBLE9BQUEsZ0JBQXdCLFVBQUEsU0FBQSxHQUN2QixHQUFBLEdBQUEsU0FBQSxHQUNDLE9BQUEsR0FDQyxJQUFBLE9BQ0MsTUFBQSxFQUVELEtBQUEsU0FDQyxNQUFBLEtBS0gsRUFBQSxTQUFBLEdBQ0MsTUFBQSxRQUFBLEdBQUEsWUFBQSxFQUNDLEtBRUEsRUFJRixPQUFBLFVBQUEsRUFBQSxFQUFBLEdBQ0MsSUFBQSxFQUFBLE1BQUEsRUFFQSxHQUFBLEVBQUEsVUFHQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUVBLElBQUEsSUFBQSxFQUFBLENBQ0MsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEVBRUEsT0FBQSxHQUNELE1BQUEsS0FBQSxFQUNDLEVBQUEsWUFBQSxHQUREO0FDdENILFlBRUEsU0FDQyxPQUFBLDZCQUFBO0FDSEQsWUFFQSxTQUNDLE9BQUEsMEJBQUE7QUNIRCxZQUVBLFNBQ0MsT0FBQSxzQ0FFQSxTQUFBLFVBQWtCLFdBQ2pCLEdBQUEsR0FBQSxJQUVBLE1BQUEsVUFDQyxTQUFBLEtBRUEsY0FDQyxRQUFBLDBCQUFBLE9BQUEsUUFDQSxRQUFBLHVCQUFBLE9BQUEsVUFDQSxRQUFBLFlBQUEsT0FBQSxVQUNBLFFBQUEsV0FBQSxPQUFBLFFBQ0EsUUFBQSxhQUFBLE9BQUEsVUFDQSxRQUFBLGFBQUEsT0FBQSxTQUNBLFFBQUEsZUFBQSxPQUFBLE1BQ0EsUUFBQSxtQkFBQSxPQUFBLEtBQ0EsUUFBQSwwQkFBQSxPQUFBLFFBR0QsZ0JBQ0MsUUFBQSxNQUFBLE9BQUEsS0FDQSxRQUFBLFlBQUEsT0FBQSxVQUNBLFFBQUEsV0FBQSxPQUFBLFFBQ0EsUUFBQSxlQUFBLE9BQUEsS0FDQSxRQUFBLFdBQUEsT0FBQSxLQUNBLFFBQUEsY0FBQSxPQUFBLFNBT0EsUUFBQSxTQUFBLEdBQ0UsSUFBQSxFQUFBLE1BQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxRQUFBLGFBQ0EsRUFBQSxFQUFBLE1BQUEsRUFNQSxPQUpBLGFBQUEsUUFBQSxFQUFBLEtBQ0MsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLFdBQUEsT0FBQSxFQUFBLEtBR0QsTUFNSixLQUFBLFlBQUEsU0FBQSxHQUdDLE1BRkEsR0FBQSxTQUFBLEVBRUEsR0FNRCxLQUFBLGVBQUEsU0FBQSxFQUFBLEdBTUMsTUFMQSxHQUFBLGNBQUEsU0FDQyxRQUFBLEVBQ0EsT0FBQSxJQUdELEdBTUQsS0FBQSxhQUFBLFNBQUEsRUFBQSxHQUNDLEdBQUEsS0FXQSxPQVRBLElBR0MsRUFBQSxRQUFBLEVBQ0EsRUFBQSxLQUFBLEdBSEEsRUFBQSxRQUFBLEVBTUQsRUFBQSxZQUFBLFFBQUEsR0FFQSxHQUdELEtBQUEsS0FBQSxXQUNDLFFBQUEsS0FHQyxRQUFBLEdBQUEsRUFBQSxHQUNDLElBQUEsRUFBQSxNQUFBLEVBTUEsSUFBQSxHQUFBLEVBQUEsVUFLQSxPQUZBLEdBQUEsRUFBQSxRQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxVQUFBLEtBWkQsR0FBQSxLQXVEQSxPQW5DQSxHQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0MsR0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEdBQ0UsRUFBQSxFQUFBLFNBQUEsV0FZRixPQVZBLEdBQUEsUUFBQSxTQUFBLEdBRUUsRUFERCxFQUFBLGtCQUFBLFVBQ0MsRUFBQSxRQUFBLEdBRUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLFFBSUYsRUFBQSxFQUFBLEVBQUEsSUFRRCxFQUFBLFlBQUEsU0FBQSxHQUNDLEdBQUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxHQUNFLEVBQUEsRUFBQSxTQUFBLGFBVUYsT0FSQSxHQUFBLFFBQUEsU0FBQSxHQUVFLEVBREQsRUFBQSxrQkFBQSxVQUNDLEVBQUEsUUFBQSxHQUVBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxRQUlGLEdBR0QsRUFHRCxNQUFBLElBQUE7QUNwSkgsWUFFQSxTQUNDLE9BQUEsK0NBRUEsVUFBQSxrQkFBNkIsVUFBQSxTQUFBLEdBQzVCLE9BQ0MsU0FBQSxJQUNBLFNBQUEsWUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQyxHQUFBLEdBQUEsRUFBQSxHQUNFLEVBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxLQUtGLEVBQUEsU0FBQSxHQUNDLE1BQUEsR0FBQSxVQUFBLEVBQUEsSUFNRCxFQUFBLFNBQUEsR0FDQyxNQUFBLEdBQUEsWUFBQSxJQU9ELEVBQUEsU0FBQSxHQUNDLE1BQUEsR0FBQSxHQUdELEdBQUEsU0FBQSxLQUFBLEdBT0EsRUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLEdBQ0MsR0FBQSxLQUFBLEVBQUEsT0FBQSxHQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLElBQ0MsRUFBQSxjQUFBLEdBQ0EsRUFBQSxjQUlGLEVBQUEsR0FBQSxXQUFBLFNBQUEsSUFDYSxFQUFBLE1BQUEsSUFBQSxFQUFBLE1BQUEsS0FDSSxFQUFBLG1CQUlSLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDSSxHQUFBLEdBQUEsRUFBQSxjQUFBLGNBQUEsUUFBQSxPQUNBLE9BQUEsSUFDSSxFQUFBO0FDOURyQixZQUVBLFNBQ0MsT0FBQSw0QkFDQyIsImZpbGUiOiJuZy1jdXJyZW5jeS1tYXNrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzaycsIFtcclxuXHRcdCduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzJyxcclxuXHRcdCduZ0N1cnJlbmN5TWFzay5maWx0ZXJzJyxcclxuXHRcdCduZ0N1cnJlbmN5TWFzay5wcm92aWRlcnMnXHJcblx0XSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG5cdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrLmZpbHRlcnMuY3VycmVuY3lNYXNrJywgW10pXHJcblxyXG5cdC5maWx0ZXIoJ2N1cnJlbmN5TWFzaycsIGZ1bmN0aW9uICgkbWFza2VyKSB7XHJcblx0XHR2YXIgZGlnZXN0TW9kZSA9IGZ1bmN0aW9uIChtb2RlKSB7XHJcblx0XHRcdHN3aXRjaChtb2RlKSB7XHJcblx0XHRcdFx0Y2FzZSAnbWFzayc6XHJcblx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3VubWFzayc6XHJcblx0XHRcdFx0XHRyZXR1cm4gMjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBkaWdlc3RDdXJyZW5jeSA9IGZ1bmN0aW9uIChjdXJyZW5jeSkge1xyXG5cdFx0XHRpZihjdXJyZW5jeSA9PT0gbnVsbCB8fCBjdXJyZW5jeSA9PT0gJ2RlZmF1bHQnKSB7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIGN1cnJlbmN5O1xyXG5cdFx0XHR9O1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBtb2RlLCBjdXJyZW5jeSkge1xyXG5cdFx0XHRpZighaW5wdXQpIHJldHVybiAnJztcclxuXHJcblx0XHRcdGlucHV0ID0gaW5wdXQudG9TdHJpbmcoKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vICdtb2RlJyBkZWZpbmVkLiBNYXNrIHRoZSBpbnB1dC5cclxuXHRcdFx0dmFyIG1vZGUgPSBtb2RlID8gZGlnZXN0TW9kZShtb2RlKSA6IGRpZ2VzdE1vZGUoJ21hc2snKSxcclxuXHRcdFx0ZGlnZXN0ZWRDdXJyZW5jeSA9IGN1cnJlbmN5ID8gZGlnZXN0Q3VycmVuY3koY3VycmVuY3kpIDogZGlnZXN0Q3VycmVuY3kobnVsbCk7XHJcblxyXG5cdFx0XHRpZihtb2RlID09PSAxKSB7XHJcblx0XHRcdFx0dmFyIG1hc2tlZFZhbHVlID0gJG1hc2tlci5tYXNrVmFsdWUoaW5wdXQsIGRpZ2VzdGVkQ3VycmVuY3kpO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gbWFza2VkVmFsdWU7XHJcblx0XHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gMikge1xyXG5cdFx0XHRcdHJldHVybiAkbWFza2VyLnVubWFza1ZhbHVlKGlucHV0KTtcclxuXHRcdFx0fTtcclxuXHRcdH07XHJcblx0fSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG5cdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrLmRpcmVjdGl2ZXMnLCBbJ25nQ3VycmVuY3lNYXNrLmRpcmVjdGl2ZXMubmdDdXJyZW5jeU1hc2snXSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG5cdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrLmZpbHRlcnMnLCBbJ25nQ3VycmVuY3lNYXNrLmZpbHRlcnMuY3VycmVuY3lNYXNrJ10pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5wcm92aWRlcnMubWFza2VyJywgW10pXHJcblxyXG5cdC5wcm92aWRlcignJG1hc2tlcicsIGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciAkbWFza2VyUHJvdmlkZXIgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuZGVmYXVsdHMgPSB7XHJcblx0XHRcdGN1cnJlbmN5OiAnUiQnLFxyXG5cclxuXHRcdFx0bWFza01hdGNoZXM6IFtcclxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXC5bMC05XSkoPz1bMC05XXswfSQpL2csICd3aXRoJzogJyQxMCcgfSwvLyBDb252ZXJ0cyBYWFhYLlggdG8gWFhYWC5YMFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXihcXGQpKig/PShcXGR7MCx9KSQpL2csICd3aXRoJzogJyQmLDAwJyB9LC8vIENvbnZlcnRzIFhYWFggdG8gWFhYWCwwMFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXihcXGR7MX0pJC8sICd3aXRoJzogJzAsMCQxJyB9LC8vIENvbnZlcnRzIFggdG8gMCwwWFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiAnLCQxJ30sLy8gQ29udmVydHMgWFggdG8gMCxYWFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvLChcXGR7Myx9KSQvLCAnd2l0aCc6ICckMSwwMCcgfSwvLyBDb252ZXJ0cyBYLFhYWCB0byBYLFhYXHJcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eLChcXGR7Mn0pJC8sICd3aXRoJzogXCIwLCQxXCIgfSwvLyBDb252ZXJ0cyAsWFggdG8gMCxYWFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKD86XFwsezIsfSkrL2csICd3aXRoJzogXCIsXCIgfSwvLyBDb252ZXJ0cyBhbGwgZHVwbGljYXRlZCBjb21tYSBmb3IganVzdCBvbmVcclxuXHRcdFx0XHR7ICdyZXBsYWNlJzogL1tBLXp7fVxcW1xcXV8hXFwuXS9nLCAnd2l0aCc6IFwiXCIgfSwvLyBDb252ZXJ0cyBhbGwgbm9uLWRpZ2l0IG51bWJlcnMgdG8gJydcclxuXHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJ3dpdGgnOiBcIiQxLlwiIH0sLy8gQ29udmVydHMgWFhYWFhYIHRvIFhYWC5YWFhcdFx0XHRcdFxyXG5cdFx0XHRdLFxyXG5cclxuXHRcdFx0dW5tYXNrTWF0Y2hlczogW1xyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXFxEL2csICd3aXRoJzogXCJcIiB9LCAvLyBDb252ZXJ0cyAgYWxsIG5vbi1kaWdpdCBudW1iZXJzIHRvICcnXHJcblx0XHRcdFx0eyAncmVwbGFjZSc6IC9eKFxcZHsxfSkkLywgJ3dpdGgnOiAnMC4wJDEnIH0sIC8vIENvbnZlcnRzIFggdG8gWC4wWFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiAnLiQxJ30sIC8vIENvbnZlcnRzIFhYIHRvIC5YWFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKCwwMHxcXC4wMCQpL2csICd3aXRoJzogJycgfSwgLy8gQ29udmVydHMgYWxsICxYWCBhbmQgLlhYIHRvIG5vdGhpbmdcdFx0XHRcdFxyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXigwezEsfSkvLCAnd2l0aCc6ICcnIH0sIC8vIENvbnZlcnRzIHplcm9zIGF0IHRoZSBzdGFydCBvZiB0aGUgc3RyaW5nIHRvIG5vdGhpbmdcclxuXHRcdFx0XHR7ICdyZXBsYWNlJzogL15cXC4oXFxkezJ9KSQvLCAnd2l0aCc6IFwiMC4kMVwiIH0sIC8vIENvbnZlcnRzIC5YWCB0byAwLlhYXHJcblxyXG5cdFx0XHRcdC8qKlxyXG5cdFx0XHRcdCAqIENsZWFuIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBmcm9tXHJcblx0XHRcdFx0ICogdW5zaWduaWZpY2FudCBudW1iZXJzIGNvbnZlcnRpbmdcclxuXHRcdFx0XHQgKiBYWFguMzBYWFhYIHRvIFhYWC4zMFxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdHsgJ3JlcGxhY2UnOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0aWYoIXZhbHVlKSByZXR1cm4gJyc7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdcXC4oXFxkezMsfSkkJyksXHJcblx0XHRcdFx0XHRcdG1hdGNoID0gdmFsdWUubWF0Y2gocmVnZXgpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYobWF0Y2ggaW5zdGFuY2VvZiBBcnJheSAmJiBtYXRjaFsxXSkge1xyXG5cdFx0XHRcdFx0XHRcdHZhbHVlID0gdmFsdWUucmVwbGFjZShtYXRjaCwgbWF0Y2gudG9TdHJpbmcoKS5zdWJzdHIoMCwgMikpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuc2V0Q3VycmVuY3kgPSBmdW5jdGlvbiAoY3VycmVuY3kpIHtcclxuXHRcdFx0JG1hc2tlclByb3ZpZGVyLmN1cnJlbmN5ID0gY3VycmVuY3k7XHJcblxyXG5cdFx0XHRyZXR1cm4gJG1hc2tlclByb3ZpZGVyO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFkZCBhIG5ldyBtYXRjaCB0YXNrIHRvICRtYXNrZXIudW5tYXNrTWF0Y2hlcy5cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5hZGRVbm1hc2tNYXRjaCA9IGZ1bmN0aW9uIChyZXBsYWNlLCB2YWx1ZSkge1xyXG5cdFx0XHQkbWFza2VyUHJvdmlkZXIudW5tYXNrTWF0Y2hlcy51bnNoaWZ0KHtcclxuXHRcdFx0XHQncmVwbGFjZSc6IHJlcGxhY2UsXHJcblx0XHRcdFx0J3dpdGgnOiB2YWx1ZVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiAkbWFza2VyUHJvdmlkZXI7XHJcblx0XHR9O1x0XHRcdFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWRkIGEgbmV3IG1hdGNoIHRhc2sgdG8gJG1hc2tlci5tYXNrTWF0Y2hlcy5cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5hZGRNYXNrTWF0Y2ggPSBmdW5jdGlvbiAocmVwbGFjZSwgdmFsdWUpIHtcclxuXHRcdFx0dmFyIG1hdGNoID0ge307XHJcblxyXG5cdFx0XHRpZighdmFsdWUpIHtcclxuXHRcdFx0XHRtYXRjaC5yZXBsYWNlID0gcmVwbGFjZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRtYXRjaC5yZXBsYWNlID0gcmVwbGFjZTtcclxuXHRcdFx0XHRtYXRjaC53aXRoID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRtYXNrZXJQcm92aWRlci5tYXNrTWF0Y2hlcy51bnNoaWZ0KG1hdGNoKTtcclxuXHJcblx0XHRcdHJldHVybiAkbWFza2VyUHJvdmlkZXI7XHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuJGdldCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0ZnVuY3Rpb24gJE1hc2tlckZhY3RvcnkgKCkge1xyXG5cdFx0XHRcdHZhciAkbWFza2VyID0ge307XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGFkZEN1cnJlbmN5ICh2YWx1ZSwgY3VycmVuY3kpIHtcclxuXHRcdFx0XHRcdGlmKCF2YWx1ZSkgcmV0dXJuIHZhbHVlO1xyXG5cclxuXHRcdFx0XHRcdC8qKlxyXG5cdFx0XHRcdFx0ICogQ29udmVydHMgQHZhbHVlIHRvIGEgU3RyaW5nIGluc3RhbmNlLCBmb3IgTnVtYmVyXHJcblx0XHRcdFx0XHQgKiBpbnN0YW5jZXMgZG9lc24ndCBoYXZlIC5yZXBsYWNlKCkgcHJvdG90eXBlLlxyXG5cdFx0XHRcdFx0ICovXHJcblx0XHRcdFx0XHR2YXIgbmV3VmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEltcGxlbWVudHMgdGhlIGN1cnJlbmN5IGF0IEBuZXdWYWx1ZVxyXG5cdFx0XHRcdFx0bmV3VmFsdWUgPSBuZXdWYWx1ZS5yZXBsYWNlKC9eLywgKGN1cnJlbmN5ID8gY3VycmVuY3kgOiAkbWFza2VyUHJvdmlkZXIuZGVmYXVsdHMuY3VycmVuY3kpICsgJyAnKTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3VmFsdWU7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0LyoqXHJcblx0XHRcdFx0ICogTWFzayBAdmFsdWUgbWF0Y2hpbmcgaXQgY29udGVudHMuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JG1hc2tlci5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGN1cnJlbmN5KSB7XHJcblx0XHRcdFx0XHR2YXIgbWFza2VkVmFsdWUgPSB2YWx1ZSA/IHZhbHVlLnRvU3RyaW5nKCkgOiAnJyxcclxuXHRcdFx0XHRcdFx0XHRtYXRjaGVzID0gJG1hc2tlclByb3ZpZGVyLmRlZmF1bHRzLm1hc2tNYXRjaGVzO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG5cdFx0XHRcdFx0XHRpZihrZXkucmVwbGFjZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcblx0XHRcdFx0XHRcdFx0bWFza2VkVmFsdWUgPSBrZXkucmVwbGFjZShtYXNrZWRWYWx1ZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0bWFza2VkVmFsdWUgPSBtYXNrZWRWYWx1ZS5yZXBsYWNlKGtleS5yZXBsYWNlLCBrZXkud2l0aCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdG1hc2tlZFZhbHVlID0gYWRkQ3VycmVuY3kobWFza2VkVmFsdWUsIGN1cnJlbmN5KTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gbWFza2VkVmFsdWU7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKipcclxuXHRcdFx0XHQgKiBSZXR1cm4gQHZhbHVlIHRvIGl0IHJlYWwgdmFsdWUuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0JG1hc2tlci51bm1hc2tWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdFx0XHRcdFx0dmFyIHVubWFza2VkVmFsdWUgPSB2YWx1ZSA/IHZhbHVlLnRvU3RyaW5nKCkgOiAnJyxcclxuXHRcdFx0XHRcdFx0XHRtYXRjaGVzID0gJG1hc2tlclByb3ZpZGVyLmRlZmF1bHRzLnVubWFza01hdGNoZXM7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcblx0XHRcdFx0XHRcdGlmKGtleS5yZXBsYWNlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuXHRcdFx0XHRcdFx0XHR1bm1hc2tlZFZhbHVlID0ga2V5LnJlcGxhY2UodW5tYXNrZWRWYWx1ZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dW5tYXNrZWRWYWx1ZSA9IHVubWFza2VkVmFsdWUucmVwbGFjZShrZXkucmVwbGFjZSwga2V5LndpdGgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuIHVubWFza2VkVmFsdWU7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0cmV0dXJuICRtYXNrZXI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBuZXcgJE1hc2tlckZhY3Rvcnk7XHJcblx0XHR9O1xyXG5cdH0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuXHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay5kaXJlY3RpdmVzLm5nQ3VycmVuY3lNYXNrJywgW10pXHJcblxyXG5cdC5kaXJlY3RpdmUoJ25nQ3VycmVuY3lNYXNrJywgZnVuY3Rpb24gKCRtYXNrZXIpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3RyaWN0OiAnQScsXHJcblx0XHRcdHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcclxuXHRcdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMpIHtcclxuXHRcdFx0XHR2YXIgbmdNb2RlbCA9IGNvbnRyb2xsZXJzWzBdLFxyXG5cdFx0XHRcdFx0XHRjdXJyZW5jeSA9ICFhdHRycy5jdXJyZW5jeSA/IG51bGwgOiBhdHRycy5jdXJyZW5jeTtcclxuXHJcblx0XHRcdFx0LyoqXHJcblx0XHRcdFx0ICogTWFzayBAdmFsdWUgbWF0Y2hpbmcgaXQgY29udGVudHMuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0dmFyIG1hc2tWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICRtYXNrZXIubWFza1ZhbHVlKHZhbHVlLCBjdXJyZW5jeSk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKipcclxuXHRcdFx0XHQgKiBSZXR1cm4gQHZhbHVlIHRvIGl0IHJlYWwgdmFsdWUuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0dmFyIHVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJG1hc2tlci51bm1hc2tWYWx1ZSh2YWx1ZSk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKipcclxuXHRcdFx0XHQgKiBQYXJzZXIgd2hvIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgbmdNb2RlbFxyXG5cdFx0XHRcdCAqIGJlZm9yZSB0aGUgZ29lcyB0byBET00uIFRoYXQgaXMgdGhlIHJlYWwgbmdNb2RlbCB2YWx1ZS5cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHR2YXIgcGFyc2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdW5tYXNrVmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZXIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8qKlxyXG5cdFx0XHRcdCAqIEV2ZXJ5dGltZSB0aGUgaW5wdXQgc3VmZmVyIGEgY2hhbmdlLFxyXG5cdFx0XHRcdCAqIHRoZSBkaXJlY3RpdmUgd2lsbCB1cGRhdGUgaXQgYW5kIG1hc2tcclxuXHRcdFx0XHQgKiBhbGwgdGhlIHR5cGVkIGNvbnRlbnQuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0c2NvcGUuJHdhdGNoKGF0dHJzLm5nTW9kZWwsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdFx0XHRcdFx0aWYoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA8IDEpIHsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRcdFx0dmFyIG1hc2tlZFZhbHVlID0gbWFza1ZhbHVlKHZhbHVlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYobWFza2VkVmFsdWUgIT0gdmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0bmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG1hc2tlZFZhbHVlKTtcclxuXHRcdFx0XHRcdFx0bmdNb2RlbC4kcmVuZGVyKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdGVsZW1lbnQub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGV2dCkge1xyXG5cdCAgICAgICAgICAgICAgICBpZiAoZXZ0LndoaWNoIDwgNDggfHwgZXZ0LndoaWNoID4gNTcpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfSlcclxuXHJcblx0ICAgICAgICAgICAgZWxlbWVudC5vbigncGFzdGUnLCBmdW5jdGlvbiAoZXZ0KSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBwYXN0ZURhdGEgPSBldnQub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQnKVxyXG5cdCAgICAgICAgICAgICAgICBpZihpc05hTihwYXN0ZURhdGEpKXtcclxuXHQgICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfSlcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcblx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2sucHJvdmlkZXJzJywgW1xyXG5cdFx0J25nQ3VycmVuY3lNYXNrLnByb3ZpZGVycy5tYXNrZXInXHJcblx0XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9