!function(){"use strict";angular.module("ngCurrencyMask",["ngCurrencyMask/Services","ngCurrencyMask/Directives","ngCurrencyMask/Filters","ngCurrencyMask/Providers"])}();
!function(){"use strict";angular.module("ngCurrencyMask/Service/Masker",[]).factory("Masker",["$currencyMask",function(e){var r=function(r,c){if(!r)return r;var n=r.toString();return n=n.replace(/^/,(c?c:e.currency)+" ")},c=function(c,n){var t=c.toString(),a=e.maskMatches;return a.forEach(function(e){"function"==typeof e.replace?t=e.replace(t):"object"==typeof e.replace&&(t=t.replace(e.replace,e.with))}),t=r(t,n)},n=function(r){var c=r.toString(),n=e.unmaskMatches;return n.forEach(function(e){"function"==typeof e.replace?c=e.replace(c):"object"==typeof e.replace&&(c=c.replace(e.replace,e.with))}),c};return{maskValue:c,unmaskValue:n}}])}();
!function(){"use strict";angular.module("ngCurrencyMask/Filter/currencyMask",[]).filter("currencyMask",["Masker",function(n){var r=function(n){switch(n){case"mask":return 1;case"unmask":return 2}},u=function(n){return null===n?null:n};return function(a,e,t){var e=e?r(e):r("mask"),c=t?u(t):u(null);if(1===e){var s=n.maskValue(a,c);return s}return 2===e?n.unmaskValue(a):void 0}}])}();
!function(){"use strict";angular.module("ngCurrencyMask/Provider/currencyMask",[]).provider("$currencyMask",function(){var e=this,r={currency:"R$",maskMatches:[{replace:function(e){return e.toString()}},{replace:function(e){var r=/(\.[0-9])(?=[0-9]{0}$)/g;return e.replace(r,"$10")}},{replace:function(e){return e.replace(e[e.lastIndexOf(".")],",")}},{replace:function(e){return"."!==e[e.length-3]&&(e=e.replace(/^(\d)*(?=(\d{0,})$)/g,"$&.00")),e}},{replace:/[^\d]/g,"with":""},{replace:/(\d{2})$/,"with":",$1"},{replace:/,(\d{3,})$/,"with":"$1,00"},{replace:/^(0{1,})/,"with":""},{replace:/^,(\d{2})$/,"with":"0,$1"},{replace:/(\d)(?=(\d{3})+(?!\d))/g,"with":"$1."}],unmaskMatches:[{replace:function(e){if(!e)return"";var r=e.match(/(^[\d\D]{0,})(\,)/)[1];return r&&(e=e.replace(r,r.replace(/\D/g,""))),e=e.replace(e[e.lastIndexOf(",")],"."),parseFloat(e)}}]};this.setCurrency=function(t){return r.currency=t,e},this.addUnmaskMatch=function(t,c){return r.unmaskMatches.unshift({replace:t,"with":c}),e},this.addMaskMatch=function(t,c){var n={};return c?(n.replace=t,n.with=c):n.replace=t,r.maskMatches.unshift(n),e},this.$get=function(){return r}})}();
!function(){"use strict";angular.module("ngCurrencyMask/Directives",["ngCurrencyMask/Directive/ngCurrencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask/Filters",["ngCurrencyMask/Filter/currencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask/Directive/ngCurrencyMask",[]).directive("ngCurrencyMask",["Masker",function(n){return{restrict:"A",require:["?ngModel"],link:function(r,e,u,t){var c=t[0],i=u.currency?u.currency:null,a=function(r){return n.maskValue(r,i)},s=function(r){return n.unmaskValue(r)},l=function(n){return s(n)};c.$parsers.push(l),r.$watch(u.ngModel,function(n){if(n&&!(n.length<1)){var r=a(n);r!=n&&(c.$setViewValue(r),c.$render())}})}}}])}();
!function(){"use strict";angular.module("ngCurrencyMask/Providers",["ngCurrencyMask/Provider/currencyMask"])}();
!function(){"use strict";angular.module("ngCurrencyMask/Services",["ngCurrencyMask/Service/Masker"])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbXBvbmVudHMvTWFza2VyLVNlcnZpY2UuanMiLCJjb21wb25lbnRzL2N1cnJlbmN5TWFzay1GaWx0ZXIuanMiLCJjb21wb25lbnRzL2N1cnJlbmN5TWFzay1Qcm92aWRlci5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy5qcyIsImNvbXBvbmVudHMvZmlsdGVycy5qcyIsImNvbXBvbmVudHMvbmdDdXJyZW5jeU1hc2stRGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9wcm92aWRlcnMuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiZGVmYXVsdHMiLCJhZGRDdXJyZW5jeSIsInZhbHVlIiwiY3VycmVuY3kiLCJuZXdWYWx1ZSIsInRvU3RyaW5nIiwicmVwbGFjZSIsIm1hc2tWYWx1ZSIsIm1hc2tlZFZhbHVlIiwibWF0Y2hlcyIsIm1hc2tNYXRjaGVzIiwiZm9yRWFjaCIsImtleSIsIndpdGgiLCJ1bm1hc2tWYWx1ZSIsInVubWFza2VkVmFsdWUiLCJ1bm1hc2tNYXRjaGVzIiwiZmlsdGVyIiwiTWFza2VyIiwiZGlnZXN0TW9kZSIsIm1vZGUiLCJkaWdlc3RDdXJyZW5jeSIsImlucHV0IiwiZGlnZXN0ZWRDdXJyZW5jeSIsInByb3ZpZGVyIiwiJHNlbGYiLCJ0aGlzIiwiJGN1cnJlbmN5TWFzayIsIm1hdGNoIiwibGFzdEluZGV4T2YiLCJsZW5ndGgiLCJwYXJzZUZsb2F0Iiwic2V0Q3VycmVuY3kiLCJhZGRVbm1hc2tNYXRjaCIsInVuc2hpZnQiLCJhZGRNYXNrTWF0Y2giLCIkZ2V0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiY29udHJvbGxlcnMiLCJuZ01vZGVsIiwicGFyc2VyIiwiJHBhcnNlcnMiLCJwdXNoIiwiJHdhdGNoIiwiJHNldFZpZXdWYWx1ZSIsIiRyZW5kZXIi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QUN0QnFDLEVBQVFNO0NDbERwQixXQUNDLFlBRUF0RCxTQUNFQyxPQUFPLDRCQUNQO0NDTEgsV0FDQyxZQUVBRCxTQUNFQyxPQUFPLDJCQUE0QiIsImZpbGUiOiJuZy1jdXJyZW5jeS1tYXNrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzaycsIFtcblx0XHRcdCduZ0N1cnJlbmN5TWFzay9TZXJ2aWNlcycsXG5cdFx0XHQnbmdDdXJyZW5jeU1hc2svRGlyZWN0aXZlcycsXG5cdFx0XHQnbmdDdXJyZW5jeU1hc2svRmlsdGVycycsXG5cdFx0XHQnbmdDdXJyZW5jeU1hc2svUHJvdmlkZXJzJ1xuXHRcdF0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2svU2VydmljZS9NYXNrZXInLCBbXSlcblxuXHRcdC5mYWN0b3J5KCdNYXNrZXInLCBbJyRjdXJyZW5jeU1hc2snLCBmdW5jdGlvbiAoZGVmYXVsdHMpIHtcblx0XHRcdHZhciBhZGRDdXJyZW5jeSA9IGZ1bmN0aW9uICh2YWx1ZSwgY3VycmVuY3kpIHtcblx0XHRcdFx0aWYoIXZhbHVlKSByZXR1cm4gdmFsdWU7XG5cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIENvbnZlcnRzIEB2YWx1ZSB0byBhIFN0cmluZyBpbnN0YW5jZSwgZm9yIE51bWJlclxuXHRcdFx0XHQgKiBpbnN0YW5jZXMgZG9lc24ndCBoYXZlIC5yZXBsYWNlKCkgcHJvdG90eXBlLlxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dmFyIG5ld1ZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblxuXHRcdFx0XHQvLyBJbXBsZW1lbnRzIHRoZSBjdXJyZW5jeSBhdCBAbmV3VmFsdWVcblx0XHRcdFx0bmV3VmFsdWUgPSBuZXdWYWx1ZS5yZXBsYWNlKC9eLywgKGN1cnJlbmN5ID8gY3VycmVuY3kgOiBkZWZhdWx0cy5jdXJyZW5jeSkgKyAnICcpO1xuXG5cdFx0XHRcdHJldHVybiBuZXdWYWx1ZTtcblx0XHRcdH07XG5cblx0XHQgIC8qKlxuXHRcdCAgICogTWFzayBAdmFsdWUgbWF0Y2hpbmcgaXQgY29udGVudHMuXG5cdFx0ICAgKi9cblx0XHQgIHZhciBtYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGN1cnJlbmN5KSB7XG5cdFx0ICAgIHZhciBtYXNrZWRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCksXG5cdFx0ICAgIFx0XHRtYXRjaGVzID0gZGVmYXVsdHMubWFza01hdGNoZXM7XG5cdFx0ICAgIFxuXHRcdCAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdCAgICBcdGlmKHR5cGVvZiBrZXkucmVwbGFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdCAgICBcdFx0bWFza2VkVmFsdWUgPSBrZXkucmVwbGFjZShtYXNrZWRWYWx1ZSk7XG5cdFx0ICAgIFx0fSBlbHNlIGlmICh0eXBlb2Yga2V5LnJlcGxhY2UgPT09ICdvYmplY3QnKSB7XG5cdFx0ICAgICAgXHRtYXNrZWRWYWx1ZSA9IG1hc2tlZFZhbHVlLnJlcGxhY2Uoa2V5LnJlcGxhY2UsIGtleS53aXRoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pO1xuXG5cdFx0ICAgIG1hc2tlZFZhbHVlID0gYWRkQ3VycmVuY3kobWFza2VkVmFsdWUsIGN1cnJlbmN5KTtcblxuXHRcdCAgICByZXR1cm4gbWFza2VkVmFsdWU7XG5cdFx0ICB9O1xuXHRcdCAgXG5cdFx0ICAvKipcblx0XHQgICAqIFJldHVybiBAdmFsdWUgdG8gaXQgcmVhbCB2YWx1ZS5cblx0XHQgICAqL1xuXHRcdCAgdmFyIHVubWFza1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0ICAgIHZhciB1bm1hc2tlZFZhbHVlID0gdmFsdWUudG9TdHJpbmcoKSxcblx0XHQgICAgXHRcdG1hdGNoZXMgPSBkZWZhdWx0cy51bm1hc2tNYXRjaGVzO1xuXHRcdCAgICBcblx0XHQgICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHQgICAgXHRpZih0eXBlb2Yga2V5LnJlcGxhY2UgPT09ICdmdW5jdGlvbicpIHtcblx0XHQgICAgXHRcdHVubWFza2VkVmFsdWUgPSBrZXkucmVwbGFjZSh1bm1hc2tlZFZhbHVlKTtcblx0XHQgICAgXHR9IGVsc2UgaWYgKHR5cGVvZiBrZXkucmVwbGFjZSA9PT0gJ29iamVjdCcpIHtcblx0XHQgICAgICBcdHVubWFza2VkVmFsdWUgPSB1bm1hc2tlZFZhbHVlLnJlcGxhY2Uoa2V5LnJlcGxhY2UsIGtleS53aXRoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIH0pO1xuXHRcdCAgICBcblx0XHQgICAgcmV0dXJuIHVubWFza2VkVmFsdWU7XG5cdFx0ICB9O1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRtYXNrVmFsdWU6IG1hc2tWYWx1ZSxcblx0XHRcdFx0dW5tYXNrVmFsdWU6IHVubWFza1ZhbHVlXG5cdFx0XHR9O1xuXHRcdH1dKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCduZ0N1cnJlbmN5TWFzay9GaWx0ZXIvY3VycmVuY3lNYXNrJywgW10pXG5cblx0XHQuZmlsdGVyKCdjdXJyZW5jeU1hc2snLCBbJ01hc2tlcicsIGZ1bmN0aW9uIChNYXNrZXIpIHtcblx0XHRcdHZhciBkaWdlc3RNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcblx0XHRcdFx0c3dpdGNoKG1vZGUpIHtcblx0XHRcdFx0XHRjYXNlICdtYXNrJzpcblx0XHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndW5tYXNrJzpcblx0XHRcdFx0XHRcdHJldHVybiAyO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHZhciBkaWdlc3RDdXJyZW5jeSA9IGZ1bmN0aW9uIChjdXJyZW5jeSkge1xuXHRcdFx0XHRpZihjdXJyZW5jeSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBjdXJyZW5jeTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIG1vZGUsIGN1cnJlbmN5KSB7XG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIG5vICdtb2RlJyBkZWZpbmVkLiBNYXNrIHRoZSBpbnB1dC5cblx0XHRcdFx0dmFyIG1vZGUgPSBtb2RlID8gZGlnZXN0TW9kZShtb2RlKSA6IGRpZ2VzdE1vZGUoJ21hc2snKSxcblx0XHRcdFx0ZGlnZXN0ZWRDdXJyZW5jeSA9IGN1cnJlbmN5ID8gZGlnZXN0Q3VycmVuY3koY3VycmVuY3kpIDogZGlnZXN0Q3VycmVuY3kobnVsbCk7XG5cblx0XHRcdFx0aWYobW9kZSA9PT0gMSkge1xuXHRcdFx0XHRcdHZhciBtYXNrZWRWYWx1ZSA9IE1hc2tlci5tYXNrVmFsdWUoaW5wdXQsIGRpZ2VzdGVkQ3VycmVuY3kpO1xuXG5cdFx0XHRcdFx0cmV0dXJuIG1hc2tlZFZhbHVlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG1vZGUgPT09IDIpIHtcblx0XHRcdFx0XHRyZXR1cm4gTWFza2VyLnVubWFza1ZhbHVlKGlucHV0KTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fV0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrL1Byb3ZpZGVyL2N1cnJlbmN5TWFzaycsIFtdKVxuXG5cdFx0LnByb3ZpZGVyKCckY3VycmVuY3lNYXNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyICRzZWxmID0gdGhpcyxcblx0XHRcdCRjdXJyZW5jeU1hc2sgPSB7XG5cdFx0XHRcdGN1cnJlbmN5OiAnUiQnLFxuXG5cdFx0XHRcdC8vIE1hdGNoZXMgd2hvIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgaW5wdXQgY29udGVudC5cblx0XHRcdFx0bWFza01hdGNoZXM6IFtcblx0XHRcdFx0XHR7ICdyZXBsYWNlJzogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0eyAncmVwbGFjZSc6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRcdFx0dmFyIG1hdGNoID0gLyhcXC5bMC05XSkoPz1bMC05XXswfSQpL2c7XG5cblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKG1hdGNoLCAnJDEwJyk7XG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgJ3JlcGxhY2UnOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKHZhbHVlW3ZhbHVlLmxhc3RJbmRleE9mKCcuJyldLCAnLCcpO1xuXHRcdFx0XHRcdH0gfSxcblx0XHRcdFx0XHR7ICdyZXBsYWNlJzogZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCAqIEV4YW1wbGU6IGh0dHA6Ly9yZWdleDEwMS5jb20vci9sRTB0TjkvMVxuXHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRpZih2YWx1ZVt2YWx1ZS5sZW5ndGggLSAzXSAhPT0gJy4nKSB7XG5cdFx0XHRcdFx0XHRcdHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihcXGQpKig/PShcXGR7MCx9KSQpL2csICckJi4wMCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHsgJ3JlcGxhY2UnOiAvW15cXGRdL2csICd3aXRoJzogXCJcIiB9LFxuXHRcdFx0XHRcdHsgJ3JlcGxhY2UnOiAvKFxcZHsyfSkkLywgJ3dpdGgnOiBcIiwkMVwiIH0sXG5cdFx0XHRcdFx0eyAncmVwbGFjZSc6IC8sKFxcZHszLH0pJC8sICd3aXRoJzogJyQxLDAwJyB9LFxuXHRcdFx0XHRcdHsgJ3JlcGxhY2UnOiAvXigwezEsfSkvLCAnd2l0aCc6ICcnIH0sXG5cdFx0XHRcdFx0eyAncmVwbGFjZSc6IC9eLChcXGR7Mn0pJC8sICd3aXRoJzogXCIwLCQxXCIgfSxcblx0XHRcdFx0XHR7ICdyZXBsYWNlJzogLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJ3dpdGgnOiBcIiQxLlwiIH1cblx0XHRcdFx0XSxcblxuXHRcdFx0XHR1bm1hc2tNYXRjaGVzOiBbXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHsgJ3JlcGxhY2UnOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdGlmKCF2YWx1ZSkgcmV0dXJuICcnO1xuXG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCAqIEV4YW1wbGU6IGh0dHA6Ly9yZWdleDEwMS5jb20vci9kWjByWDcvMVxuXHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHR2YXIgbWF0Y2ggPSAodmFsdWUubWF0Y2goLyheW1xcZFxcRF17MCx9KShcXCwpLykpWzFdO1xuXG5cdFx0XHRcdFx0XHRpZihtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UobWF0Y2gsIG1hdGNoLnJlcGxhY2UoL1xcRC9nLCAnJykpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UodmFsdWVbdmFsdWUubGFzdEluZGV4T2YoJywnKV0sICcuJyk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0XVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5zZXRDdXJyZW5jeSA9IGZ1bmN0aW9uIChjdXJyZW5jeSkge1xuXHRcdFx0XHQkY3VycmVuY3lNYXNrLmN1cnJlbmN5ID0gY3VycmVuY3k7XG5cblx0XHRcdFx0cmV0dXJuICRzZWxmO1xuXHRcdFx0fTtcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBZGQgYSBuZXcgbWF0Y2ggdGFzayB0byAkY3VycmVuY3lNYXNrLnVubWFza01hdGNoZXMuXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMuYWRkVW5tYXNrTWF0Y2ggPSBmdW5jdGlvbiAocmVwbGFjZSwgdmFsdWUpIHtcblx0XHRcdFx0JGN1cnJlbmN5TWFzay51bm1hc2tNYXRjaGVzLnVuc2hpZnQoe1xuXHRcdFx0XHRcdCdyZXBsYWNlJzogcmVwbGFjZSxcblx0XHRcdFx0XHQnd2l0aCc6IHZhbHVlXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJldHVybiAkc2VsZjtcblx0XHRcdH07XHRcdFx0XG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQWRkIGEgbmV3IG1hdGNoIHRhc2sgdG8gJGN1cnJlbmN5TWFzay5tYXNrTWF0Y2hlcy5cblx0XHRcdCAqL1xuXHRcdFx0dGhpcy5hZGRNYXNrTWF0Y2ggPSBmdW5jdGlvbiAocmVwbGFjZSwgdmFsdWUpIHtcblx0XHRcdFx0dmFyIG1hdGNoID0ge307XG5cblx0XHRcdFx0aWYoIXZhbHVlKSB7XG5cdFx0XHRcdFx0bWF0Y2gucmVwbGFjZSA9IHJlcGxhY2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bWF0Y2gucmVwbGFjZSA9IHJlcGxhY2U7XG5cdFx0XHRcdFx0bWF0Y2gud2l0aCA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGN1cnJlbmN5TWFzay5tYXNrTWF0Y2hlcy51bnNoaWZ0KG1hdGNoKTtcblxuXHRcdFx0XHRyZXR1cm4gJHNlbGY7XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiAkY3VycmVuY3lNYXNrO1xuXHRcdFx0fTtcblx0XHR9KTtcdFx0XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2svRGlyZWN0aXZlcycsIFsnbmdDdXJyZW5jeU1hc2svRGlyZWN0aXZlL25nQ3VycmVuY3lNYXNrJ10pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrL0ZpbHRlcnMnLCBbJ25nQ3VycmVuY3lNYXNrL0ZpbHRlci9jdXJyZW5jeU1hc2snXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2svRGlyZWN0aXZlL25nQ3VycmVuY3lNYXNrJywgW10pXG5cblx0XHQuZGlyZWN0aXZlKCduZ0N1cnJlbmN5TWFzaycsIFsnTWFza2VyJywgZnVuY3Rpb24gKE1hc2tlcikge1xuXHRcdCAgcmV0dXJuIHtcblx0XHQgICAgcmVzdHJpY3Q6ICdBJyxcblx0XHQgICAgcmVxdWlyZTogWyc/bmdNb2RlbCddLFxuXHRcdCAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycykge1xuXHRcdCAgICBcdHZhciBuZ01vZGVsID0gY29udHJvbGxlcnNbMF0sXG5cdFx0ICAgICAgXHRcdGN1cnJlbmN5ID0gIWF0dHJzLmN1cnJlbmN5ID8gbnVsbCA6IGF0dHJzLmN1cnJlbmN5O1xuXG5cdFx0ICAgIFx0LyoqXG5cdFx0ICAgIFx0ICogTWFzayBAdmFsdWUgbWF0Y2hpbmcgaXQgY29udGVudHMuXG5cdFx0ICAgIFx0ICovXG5cdFx0ICAgICAgdmFyIG1hc2tWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdCAgICAgICAgcmV0dXJuIE1hc2tlci5tYXNrVmFsdWUodmFsdWUsIGN1cnJlbmN5KTtcblx0XHQgICAgICB9O1xuXHRcdCAgICAgIFxuXHRcdCAgICAgIC8qKlxuXHRcdCAgICAgICAqIFJldHVybiBAdmFsdWUgdG8gaXQgcmVhbCB2YWx1ZS5cblx0XHQgICAgICAgKi9cblx0XHQgICAgICB2YXIgdW5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHQgICAgICAgIHJldHVybiBNYXNrZXIudW5tYXNrVmFsdWUodmFsdWUpO1xuXHRcdCAgICAgIH07XG5cdFx0ICAgICAgXG5cdFx0ICAgICAgLyoqXG5cdFx0ICAgICAgICogUGFyc2VyIHdobyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIG5nTW9kZWxcblx0XHQgICAgICAgKiBiZWZvcmUgdGhlIGdvZXMgdG8gRE9NLiBUaGF0IGlzIHRoZSByZWFsIG5nTW9kZWwgdmFsdWUuXG5cdFx0ICAgICAgICovXG5cdFx0ICAgICAgdmFyIHBhcnNlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdCAgICAgICAgcmV0dXJuIHVubWFza1ZhbHVlKHZhbHVlKTtcblx0XHQgICAgICB9O1xuXG5cdFx0ICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlcik7XG5cdFx0ICAgICAgXG5cdFx0ICAgICAgLyoqXG5cdFx0ICAgICAgICogRXZlcnl0aW1lIHRoZSBpbnB1dCBzdWZmZXIgYSBjaGFuZ2UsXG5cdFx0ICAgICAgICogdGhlIGRpcmVjdGl2ZSB3aWxsIHVwZGF0ZSBpdCBhbmQgbWFza1xuXHRcdCAgICAgICAqIGFsbCB0aGUgdHlwZWQgY29udGVudC5cblx0XHQgICAgICAgKi9cblx0XHQgICAgICBzY29wZS4kd2F0Y2goYXR0cnMubmdNb2RlbCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0ICAgICAgXHRpZighdmFsdWUgfHwgdmFsdWUubGVuZ3RoIDwgMSkgeyByZXR1cm47IH1cblxuXHRcdCAgICAgICAgdmFyIG1hc2tlZFZhbHVlID0gbWFza1ZhbHVlKHZhbHVlKTtcblx0XHQgICAgICAgIFxuXHRcdCAgICAgICAgaWYobWFza2VkVmFsdWUgIT0gdmFsdWUpIHtcblx0XHQgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG1hc2tlZFZhbHVlKTtcblx0XHQgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgfSk7XG5cdFx0ICAgIH1cblx0XHQgIH07XG5cdFx0fV0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25nQ3VycmVuY3lNYXNrL1Byb3ZpZGVycycsIFtcblx0XHRcdCduZ0N1cnJlbmN5TWFzay9Qcm92aWRlci9jdXJyZW5jeU1hc2snXG5cdFx0XSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbmdDdXJyZW5jeU1hc2svU2VydmljZXMnLCBbJ25nQ3VycmVuY3lNYXNrL1NlcnZpY2UvTWFza2VyJ10pO1xufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=